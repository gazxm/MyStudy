<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>React生命周期</title>
	<script type="text/javascript"></script>
	<style>
		h5 {
			font-weight: normal;
		}
	</style>
</head>

<body>
	<article>
		<section>
			<h2>实例化</h2>
			<p>
				<h5>首次实例化</h5>
				<ul>
					<li>getDefaultProps</li>
					<li>getInitialState</li>
					<li>componentWillMount</li>
					<li>render</li>
					<li>componentDidMount</li>
				</ul>
				<h5>实例化完成后的更新</h5>
				<ul>
					<li>getInitialState</li>
					<li>componentWillMount</li>
					<li>render</li>
					<li>componentDidMount</li>
				</ul>
			</p>
		</section>
		<section>
			<h2>存在期</h2>
			<p>
				<h5>组件已存在时的状态改变</h5>
				<ul>
					<li>componentWillReceiveProps</li>
					<li>shouldComponentUpdate</li>
					<li>componentWillUpdate</li>
					<li>render</li>
					<li>componentDidUpdate</li>
				</ul>
				<h5>销毁&清理期</h5>
				<ul>
					<li>componentWillUnmount</li>
				</ul>
			</p>
		</section>
		<section>
			<h2>说明</h2>
			<p>生命周期共提供了10个不同的API。</p>
		</section>
		<section>
			<h4>1.getDefaultProps</h4>
			<p>作用于组件类，只调用一次，返回对象用于设置默认的props，对于引用值，会在实例中共享。</p>
			<h4>2、getInitialState</h4>
			<p>作用于组件的实例，在实例创建时调用一次，用于初始化每个实例的state，此时可以访问this.props。</p>
			<h4>3、componentWillMount</h4>
			<p>在完成首次渲染之前调用，此时仍可以修改组件的state。</p>
			<h4>4、render</h4>
			<p>必选的方法，创建虚拟DOM，该方法具有特殊的规则：
				<ul>
					<li>只能通过this.props和this.state访问数据</li>
					<li>可以返回null、false或任何React组件</li>
					<li>只能出现一个顶级组件（不能返回数组）</li>
					<li>不能改变组件的状态</li>
					<li>不能修改DOM的输出</li>
				</ul>
			</p>
			<h4>5、componentDidMount</h4>
			<p>真实的DOM被渲染出来后调用，在该方法中可通过this.getDOMNode()访问到真实的DOM元素。此时已可以使用其他类库来操作这个DOM。
				<i>在服务端中，该方法不会被调用。</i>
			</p>
			<h4>6、componentWillReceiveProps</h4>
			<p>组件接收到新的props时调用，并将其作为参数nextProps使用，此时可以更改组件props及state。
				<pre>
					componentWillReceiveProps: function(nextProps) {
						if (nextProps.bool) {
							this.setState({
								bool: true
							});
						}
					}
				</pre>
			</p>
			<h4>7、shouldComponentUpdate</h4>
			<p>组件是否应当渲染新的props或state，返回false表示跳过后续的生命周期方法，通常不需要使用以避免出现bug。在出现应用的瓶颈时，可通过该方法进行适当的优化。
				<i>在首次渲染期间或者调用了forceUpdate方法后，该方法不会被调用</i>
			</p>
			<h4>8、componentWillUpdate</h4>
			<p>接收到新的props或者state后，进行渲染之前调用，此时不允许更新props或state。如果你需要更新props或state，应该使用componentWillReceiveProps</p>
			<h4>9、componentDidUpdate</h4>
			<p>完成渲染新的props或者state后调用，此时可以访问到新的DOM元素。</p>
			<h4>10、componentWillUnmount</h4>
			<p>组件被移除之前被调用，可以用于做一些清理工作，在componentDidMount方法中添加的所有任务都需要在该方法中撤销，比如创建的定时器或添加的事件监听器。</p>
		</section>
	</article>
</body>

</html>