/* 2017-01-21 */!function(a){a.fn.citySelect=function(b){if(!(this.length<1)){b=a.extend({url:"shopInformation.js",prov:null,city:null,dist:null,flag:null},b);var c,d=this,e=d.find(".prov"),f=d.find(".city"),g=d.find(".dist"),h=(b.prov,b.city,b.dist,b.flag),i=function(){var b="";b+="<option>-请选择-</option>";var d=e.get(0).selectedIndex-1;return d<0||"undefined"==c.citylist[d].c?void g.css("visibility","hidden"):(a.each(c.citylist[d].c,function(a,c){b+="<option value='"+c.n+"'>"+c.n+"</option>"}),f.html(b),void j())},j=function(){var d="",h=e.get(0).selectedIndex-1,i=f.get(0).selectedIndex-1;return g.empty().attr("disabled",!0),h<0||i<0||"undefined"==c.citylist[h].c[i].a?void("none"==b.nodata?g.css("display","none"):"hidden"==b.nodata&&g.css("visibility","hidden")):(a.each(c.citylist[h].c[i].a,function(a,b){d+="<div class='h2'>门店地址："+b.s[0].address+"</div>"}),void g.html(d).attr("disabled",!1).css({display:"",visibility:""}))},k=function(){var d="",g="<option>-请选择-</option>";flag=!0,d+=g,a.each(c.citylist,function(c,e){d+="<option value='"+e.p+"'>"+e.p+"</option>",e.p==b.prov&&a.each(e.c,function(a,c){c.n==b.city&&(flag=!1)})}),2===h&&(null===b.prov&&null===b.city||flag?(a(".error").html("未能根据你的手机号匹配到<br>门店信息,请手动查询！"),window.flag_default=!0):setTimeout(function(){e.val(b.prov),i(),setTimeout(function(){f.val(b.city),j()},1)},1)),e.html(d),f.html(g),a(".prov").find("option:eq(0)").attr("selected",!0),a(".city").find("option:eq(0)").attr("selected",!0),e.bind("change",function(){i()}),f.bind("change",function(){j()})};"string"==typeof b.url&&a.getJSON(b.url,function(a){c=a,k()})}}}(jQuery);