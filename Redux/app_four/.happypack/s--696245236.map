{"version":3,"sources":["src\\js\\common\\request.js"],"names":["request","create","interceptors","use","config","timeout","url","test","replace","method","toUpperCase","headers","data","toString","FormData","i","append","reject","error","response","resolve","message"],"mappings":";;;;;;;;;;AAEA;;;;AACA;;;;;;AAEA,IAAI,UAAU,gBAAM,AAAN,AAAd,A,UALA;;AAOA,QAAQ,AAAR,aAAqB,AAArB,QAA6B,AAA7B,IAAiC,kBAAU,AACvC;WAAO,AAAP,UAAiB,AAAjB,AACA;WAAO,AAAP,MAAa,iBAAiB,AAAjB,KAAsB,OAAO,AAA7B,OAAqC,sBAAsB,AAAtB,KAA2B,OAAO,AAAlC,OAAyC,uBAAI,OAAO,AAAX,AAAzC,OAA2D,OAAO,AAAvG,MAA8G,0DAAqC,OAAO,AAAP,IAAW,AAAX,QAAmB,AAAnB,OAA0B,AAA1B,AAArC,AAA3H,AAEA;;QAAG,OAAO,AAAP,UAAiB,OAAO,AAAP,OAAc,AAAd,kBAAgC,AAApD,QAA2D,AACvD;eAAO,AAAP,QAAe,AAAf,kBAAiC,AAAjC,AACA;YAAG,OAAO,AAAP,QAAe,OAAO,AAAP,KAAY,AAAZ,eAA2B,AAA7C,mBAA+D,AAC3D;gBAAI,OAAO,IAAI,AAAJ,AAAX,AACA;iBAAI,IAAI,AAAR,KAAa,OAAO,AAApB,MAAyB,AACrB;qBAAK,AAAL,OAAY,AAAZ,GAAe,OAAO,AAAP,KAAY,AAAZ,AAAf,AACH;AACD;mBAAO,AAAP,OAAc,AAAd,AACH;AACJ;AACD;WAAO,AAAP,AACH;AAfD,GAeG,iBAAS,AACR;WAAO,kBAAQ,AAAR,OAAe,AAAf,AAAP,AACH;AAjBD;;AAmBA,QAAQ,AAAR,aAAqB,AAArB,SAA8B,AAA9B,IAAkC,oBAAY,AAC1C;WAAO,kBAAQ,AAAR,QAAgB,SAAS,AAAT,QAAiB,AAAjC,AAAP,AACH;AAFD,GAEG,iBAAS,AACP;aAAS,UAAU,AAAV,KAAe,MAAM,AAArB,AAAV,aAA6C,MAAM,AAAN,UAAgB,AAA7D,AACA;WAAO,kBAAQ,AAAR,OAAe,AAAf,AAAP,AACH;AALD;;kBAOe,A","file":"request.js","sourceRoot":"E:/MyStudy/Redux/app_four","sourcesContent":["/* eslint-disable */\r\nimport {Toast} from 'antd-mobile';\r\nimport axios from 'axios';\r\nimport {resolveUrl as url} from 'utils';\r\n\r\nlet request = axios.create();\r\n\r\nrequest.interceptors.request.use(config => {\r\n    config.timeout = 10000;\r\n    config.url = /^(https?|\\/\\/)/.test(config.url) ? (/m\\.xianjincard\\.com/.test(config.url) ? url(config.url) : config.url) : url(`http://credit.xianjincard.com/${config.url.replace(/^\\//, '')}`);\r\n\r\n    if(config.method && config.method.toUpperCase() === 'POST'){\r\n        config.headers['Content-Type'] = 'application/x-www-form-urlencoded';\r\n        if(config.data && config.data.toString() === '[object Object]'){\r\n            let data = new FormData();\r\n            for(let i in config.data){\r\n                data.append(i, config.data[i]);\r\n            }\r\n            config.data = data;\r\n        }\r\n    }\r\n    return config;\r\n}, error => {\r\n    return Promise.reject(error);\r\n});\r\n\r\nrequest.interceptors.response.use(response => {\r\n    return Promise.resolve(response.data || {});\r\n}, error => {\r\n    (error && /timeout/.test(error.message)) && (error.message = '请求超时，请稍后重试');\r\n    return Promise.reject(error);\r\n});\r\n\r\nexport default request;"]}