{"version":3,"sources":["src\\js\\pages\\mobile\\certification\\credit\\importing.js"],"names":["title","Importing","props","state","lock","loaded","loading","document","type","location","query","url","fail","setTimeout","goBack","bind","middleware","undefined","then","code","response","message","success","replace","catch","hide","indexOf","route","push"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA;;;;AAEA;;AACA;;;;AACA;;AACA;;;;AACA;;;;;;AAPA;AASA,IAAI,QAAJ,AAAY;;IAEN,A;uCAMF;;uBAAA,AAAY,OAAM;4CAAA;;gJAAA,AACR;;cANV,AAKkB;kBALV,AACE,AACN;oBAFI,AAEI,AACR;qBAHI,AAGK,AAEK;AALV,AACJ;eAMH;;;;;4CACkB,AACf;qBAAA,AAAS,QADM,AACf,AAAiB;gBADF,AAEV,OAAQ,KAAA,AAAK,MAAL,AAAW,SAFT,AAEkB,MAFlB,AAEV,AACL;;gBAAI,WAAJ,AACA;gBAAG,QAAH,AAAW,QAAO,AACd;sBAAA,AAAM,AACT;AAFD,uBAES,QAAH,AAAW,SAAQ,AACrB;sBAAA,AAAM,AACT;AAFK,aAAA,MAED,AACD;gCAAA,AAAM,KAAN,AAAW,gBAAX,AAA2B,KAAK,YAAM,AAClC;+BAAW,gBAAX,AAAoB,AACvB;AAFD,AAGA;AACH;AACD;iBAAA,AAAK,MAAL,AAAW,KAAX,AAAgB,MAAhB,AAAsB,AACzB;;;;8BACK,A,KAAI;yBAAA;;gBAAA,AACD,aAAc,KADb,AACkB,MADlB,AACD;gBADC,AAED,OAAQ,KAAA,AAAK,MAAL,AAAW,SAFlB,AAE2B,MAF3B,AAED,AACL;;4BAAA,AAAM,QAAN,AAAc,WAAd,AAAyB,AACzB;mCAAA,AAAQ,KAAR,AAAa,KAAK,oBAAY;oBAAA,AACrB,OADqB,AACJ,SADI,AACrB;oBADqB,AACf,UADe,AACJ,SADI,AACf,AACX;;gCAAA,AAAM,QAAN,AAAc,SAAd,AAAuB,KAAK,YAAM,AAC9B;+BAAW,gBAAA,AAAS,QAApB,AAAW,AAAiB,AAC/B;AAFD,AAGH;AALD,eAAA,AAKG,MAAM,oBAAY;oBAAA,AACZ,OADY,AACK,SADL,AACZ;oBADY,AACN,UADM,AACK,SADL,AACN,AACX;;gCAAA,AAAM,AACN;oBAAG,CAAA,AAAC,GAAD,AAAI,GAAJ,AAAO,QAAP,AAAe,SAAlB,AAA2B,GAAE,AACzB;oCAAA,AAAM,KAAN,AAAW,SAAX,AAAoB,KAAK,YAAM,AAC3B;4BAAI,aAAJ,AACA;4BAAG,QAAH,AAAW,GAAE,AACT;oCAAA,AAAQ,AACX;AAFD,+BAEM,IAAG,QAAH,AAAW,GAAE,AACf;6EAAA,AAA+C,AAClD;AACD;mCAAW,YAAM,AACb;4CAAA,AAAS,KAAT,AAAc,AACjB;AAFD,AAGH;AAVD,AAWH;AAZD,2BAYS,QAAH,AAAW,GAAE,AACf;+BAAW,YAAM,AACb;+BAAA,AAAK,MAAL,AAAW,aAAX,AAAsB,AACzB;AAFD,uBAAA,AAEG,AACN;AAJK,iBAAA,MAID,AACD;oCAAA,AAAM,KAAN,AAAW,eAAX,AAA0B,KAAK,YAAM,AACjC;mCAAW,gBAAX,AAAoB,AACvB;AAFD,AAGH;AACJ;AA7BD,AA8BH;;;;iCACO,AACJ;mBACI,gBAAA,cAAA,SAAK,WAAL,AAAe,AACX,+BAAA,cAAA,SAAK,WAAL,AAAe,AACX,4BAAA,cAAA,OACI,6CAAK,WADT,AACI,AAAe,AACf,8BAAA,cAAA,SAAK,WAAL,AAAe,WAJ3B,AACI,AACI,AAEI,AAGR,0EAAA,cAAA,SAAK,WAAL,AAAe,AACX,4BAAA,cAAA,SAAK,WAAL,AAAe,cAT3B,AACI,AAOI,AACI,AAIf;;;;;;AACJ;;kBAEc,0BAAA,AAAa,A","file":"importing.js","sourceRoot":"E:/MyStudy/Redux/app_four","sourcesContent":["/* eslint-disable */\r\nimport React, {Component, createClass} from 'react';\r\nimport {List, InputItem, Checkbox, Button, Picker, Toast, Icon} from 'antd-mobile';\r\nimport {createForm} from 'rc-form';\r\nimport classnames from 'classnames';\r\nimport 'scss/mobile/credit.component.scss';\r\nimport request from 'common/request';\r\nimport {resolveUrl as url, redirect, hrefNative as native, platform} from 'utils';\r\n\r\nlet title = '信用卡账单导入';\r\n\r\nclass Importing extends Component{\r\n    state = {\r\n        lock: 1,\r\n        loaded: 0,\r\n        loading: 0\r\n    }\r\n    constructor(props){\r\n        super(props);\r\n    }\r\n    componentDidMount(){\r\n        document.title = title;\r\n        let {type} = this.props.location.query;\r\n        let url;\r\n        if(type == 'bank'){\r\n            url = 'credit-card/get-online-banking-result';\r\n        }else if(type == 'email'){\r\n            url = 'credit-card/get-mail-verification-result';\r\n        }else{\r\n            Toast.fail('缺少参数，请确认后再尝试', 1.5, () => {\r\n                setTimeout(redirect.goBack);\r\n            });\r\n            return;\r\n        }\r\n        this.query.bind(this)(url);\r\n    }\r\n    query(url){\r\n        let {middleware} = this.props;\r\n        let {type} = this.props.location.query;\r\n        Toast.loading(undefined, 0);\r\n        request(url).then(response => {\r\n            let {code, message} = response;\r\n            Toast.success(message, 1.5, () => {\r\n                setTimeout(redirect.replace('/mobile/certification/credit/import?success'));\r\n            });\r\n        }).catch(response => {\r\n            let {code, message} = response;\r\n            Toast.hide();\r\n            if([1, 3].indexOf(code) >= 0){\r\n                Toast.fail(message, 1.5, () => {\r\n                    let route;\r\n                    if(code == 1){\r\n                        route = '/mobile/certification/credit/import?fail';\r\n                    }else if(code == 3){\r\n                        route = `/mobile/certification/credit/import/${type}`;\r\n                    }\r\n                    setTimeout(() => {\r\n                        redirect.push(route);\r\n                    });\r\n                });\r\n            }else if(code == 2){\r\n                setTimeout(() => {\r\n                    this.query.bind(this)(url)\r\n                }, 1500);\r\n            }else{\r\n                Toast.fail('服务器繁忙，请稍后重试', 1.5, () => {\r\n                    setTimeout(redirect.goBack);\r\n                });\r\n            }\r\n        });\r\n    }\r\n    render(){\r\n        return (\r\n            <div className='importing'>\r\n                <div className='header'>\r\n                    <div>\r\n                        <div className='loading'/>\r\n                        <div className='title'>信用卡账单导入中...</div>\r\n                    </div>\r\n                </div>\r\n                <div className='footer'>\r\n                    <div className='security'>银行级数据加密防护</div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n};\r\n\r\nexport default createForm()(Importing);"]}