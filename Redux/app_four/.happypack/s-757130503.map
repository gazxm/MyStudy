{"version":3,"sources":["src\\js\\pages\\activity\\inte-eval\\Steptwo.js"],"names":["Steptwo","props","state","data","document","title","loading","tag","location","query","then","hide","code","alert","showHtml","click","setState","url","status","push","href","encodeURIComponent","content","map","v","i","forward","h5_link","length","img","name","gold_score","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AAEA;;AACA;;;;;;I,AAEqB;mCACnB;;mBAAA,AAAa,OAAO;wCAAA;;wIAAA,AACZ,AACN;;UAAA,AAAK;YAFa,AAElB,AAAa,AACL;AADK,AACX;WAEH;;;;;yCAEqB;mBACpB;;eAAA,AAAS,QAAT,AAAiB,AACjB;sBAAA,AAAM,QAAN,AAAc,UAAd,AAAwB,AACxB;UAAM,MAAM,KAAA,AAAK,MAAL,AAAW,SAAX,AAAoB,MAAhC,AAAsC,AACtC;qGAAA,AAAiF,KAAjF,AAAwF,KAAK,gBAAA;eAAQ,KAAR,AAAa;AAA1G,SAAA,AAAgH,KAAK,gBAAQ,AAC3H;wBAAA,AAAM,AACN;YAAI,KAAA,AAAK,SAAT,AAAkB,GAAG,AACnB;0BAAA,AAAM,MAAM,kBAAA,AAAQ,SAAS,KAA7B,AAAY,AAAsB,OAAlC,AAAyC,AACzC;cAAI,KAAA,AAAK,SAAS,CAAlB,AAAmB,MAAM,AACvB;4BAAA,AAAM,MAAN,AAAY,kBACZ;AACD;AACD;0BAAA,AAAM,MAAN,AAAY,AACZ;AACD;AACD;eAAA,AAAK;gBACG,KADR,AAAc,AACD,AAEd;AAHe,AACZ;AAZJ,AAeD;;;;4B,AAEQ,KAAK,A,QAAQ,AACpB;UAAA,AAAI,QAAQ,AACV;wBAAA,AAAS,KAAT,AAAc,AACd;AACD;AACD;eAAA,AAAS,OAAT,AAAmB,wBAAmB,mBAAmB,uBAAzD,AAAsC,AAAmB,AAAW,AACrE;;;;6BAES;mBAAA;;UAAA,AACA,OAAS,KADT,AACc,MADd,AACA,AAER;;UAAM,0BAAU,cAAA,SAAK,WAAL,AAAe,AAC7B,yBAAA,cAAA,QAAI,WAAJ,AAAc,UAAU,uBAAA,cAAA,KAAA,MADV,AACd,AAAwB,AACxB,wBAAA,cAAA,SAAK,WAAL,AAAe,AACb,6BAAA,cAAA,MACG,kBAAO,AAAK,IAAI,UAAA,AAAC,GAAD,AAAI,GAAJ;eAAU,gBAAA,cAAA,QAAI,KAAJ,AAAS,GAAG,SAAS,mBAAA;mBAAM,OAAA,AAAK,QAAQ,EAAb,AAAe,SAAS,EAA9B,AAAM,AAA0B;AAArD,aAA8D,YAAc,EAAA,AAAE,SAAF,AAAW,aAAzB,AAAsC,aAAM,KAAA,AAAK,WAAL,AAAgB,IAAhB,AAAoB,WAA9H,AAA8D,AAA2E,AAClK,8CAAK,KAAK,EAAV,AAAY,KAAK,KAAK,EADG,AACzB,AAAwB,AACxB,yBAAA,cAAA,MAAK,QAFoB,AAEzB,AAAO,AACP,uBAAA,cAAA,MAAK,QAAA,AAAE,SAAF,AAAW,wEAAyB,EAApC,AAAsC,aAH5B,AAAU,AAGzB;AAHD,AAAO,OAAA,IAJd,AAAgB,AAEd,AACE,AAMY,AAKhB,MAdgB;;aAed,gBAAA,cAAA,SAAK,WAAL,AAAe,AACb,sCAAA,cAAA,SAAK,WAAL,AAAe,AACZ,cAHP,AACE,AACE,AAKL;;;;EA7DkC,gBAAM,A;;kBAAtB,A","file":"Steptwo.js","sourceRoot":"E:/MyStudy/Redux/app_four","sourcesContent":["import React from 'react'\r\nimport Content from './Content'\r\nimport Popup from '../components/Popup'\r\nimport { Toast } from 'antd-mobile'\r\nimport { get, login, redirect, resolveUrl } from 'utils'\r\nimport 'scss/activity/inte-eval.component.scss'\r\n\r\nexport default class Steptwo extends React.Component {\r\n  constructor (props) {\r\n    super(props)\r\n    this.state = {\r\n      data: []\r\n    }\r\n  }\r\n\r\n  componentWillMount () {\r\n    document.title = '智能评测'\r\n    Toast.loading('加载中...', 0)\r\n    const tag = this.props.location.query.tag\r\n    get(`http://credit.xianjincard.com/activity/intelligence-testing/my-detail?tag=${tag}`).then(data => data.data).then(data => {\r\n      Toast.hide()\r\n      if (data.code !== 0) {\r\n        Popup.alert(Content.showHtml(data.code), 'popup')\r\n        if (data.code === -1001) {\r\n          Popup.click('a.click', login)\r\n          return\r\n        }\r\n        Popup.click('a.click')\r\n        return\r\n      }\r\n      this.setState({\r\n        data: data.data\r\n      })\r\n    })\r\n  }\r\n\r\n  forward (url, status) {\r\n    if (status) {\r\n      redirect.push('/activity/evaluation/result')\r\n      return\r\n    }\r\n    location.href = `${url}?callbackUrl=${encodeURIComponent(resolveUrl('http://h.xianjincard.com/activity/evaluation/result'))}`\r\n  }\r\n\r\n  render () {\r\n    const { data } = this.state\r\n\r\n    const content = <div className='job'>\r\n      <h2 className='head'>02/<b>02</b></h2>\r\n      <div className='content'>\r\n        <ul>\r\n          {data ? data.map((v, i) => <li key={i} onClick={() => this.forward(v.h5_link, v.status)} className={`${v.status ? 'complete' : ''} ${data.length === 1 ? 'single' : ''}`}>\r\n            <img src={v.img} alt={v.name} />\r\n            <h3>{v.name}</h3>\r\n            <h4>{v.status ? '您已完成此项测评' : `完成此项测评将获得${v.gold_score}金币`}</h4>\r\n          </li>\r\n                ) : null}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n\r\n    return (\r\n      <div className='transition-group'>\r\n        <div className='eval-two'>\r\n          {content}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"]}