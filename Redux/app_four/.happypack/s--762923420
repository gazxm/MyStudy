'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.rootRoute = exports.routerTransition = undefined;

var _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _reactRouterTransitions = require('react-router-transitions');

var _reactAddonsCssTransitionGroup = require('react-addons-css-transition-group');

var _reactAddonsCssTransitionGroup2 = _interopRequireDefault(_reactAddonsCssTransitionGroup);

var _reactRouter = require('react-router');

var _Layout = require('../pages/Layout');

var _Layout2 = _interopRequireDefault(_Layout);

var _activity = require('./activity');

var _activity2 = _interopRequireDefault(_activity);

var _employer = require('./employer');

var _employer2 = _interopRequireDefault(_employer);

var _mobile = require('./mobile');

var _mobile2 = _interopRequireDefault(_mobile);

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _reactRedux = require('react-redux');

var _store = require('../store');

var _store2 = _interopRequireDefault(_store);

var _layout = require('pages/integral/layout');

var _layout2 = _interopRequireDefault(_layout);

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : { default: obj };
}

var routerTransition = exports.routerTransition = (0, _reactRouter.applyRouterMiddleware)((0, _reactRouterTransitions.useTransitions)({
  TransitionGroup: _reactAddonsCssTransitionGroup2.default,
  onShow: function onShow(prevState, nextState, replaceTransition) {
    // console.log('onShow',nextState.children.props.route.transition)
    replaceTransition({
      transitionName: 'transition-group-show-' + nextState.children.props.route.transition,
      transitionEnterTimeout: 800,
      transitionLeaveTimeout: 200
    });
  },
  onDismiss: function onDismiss(prevState, nextState, replaceTransition) {
    // console.log('onDismiss', nextState.children.props.route.transition)
    replaceTransition({
      transitionName: 'transition-group-show-' + nextState.children.props.route.transition,
      transitionEnterTimeout: 800,
      transitionLeaveTimeout: 200
    });
  },

  defaultTransition: {
    transitionName: 'transition-group-show-from-right',
    transitionEnterTimeout: 800,
    transitionLeaveTimeout: 200
  } }));

var rootRoute = exports.rootRoute = [_mobile2.default, {
  path: '/',
  component: (0, _reactRouterTransitions.withTransition)(_Layout2.default),
  indexRoute: { onEnter: function onEnter(nextState, replace) {
      return replace('/mobile/loan');
    } },
  childRoutes: [{
    path: 'security',
    transition: 'from-left',
    indexRoute: [{
      transition: 'from-left',
      getComponent: function getComponent(location, callback) {
        require.ensure([], function (require) {
          callback(null, require('../pages/security/SecurityList'));
        });
      }
    }],
    childRoutes: [{
      path: 'certification',
      transition: 'from-up',
      getComponent: function getComponent(location, callback) {
        require.ensure([], function (require) {
          callback(null, require('../pages/security/SecurityCertification'));
        });
      }
    }]
  }, {
    path: 'fund',
    transition: 'from-left',
    indexRoute: [{
      transition: 'from-left',
      getComponent: function getComponent(location, callback) {
        require.ensure([], function (require) {
          callback(null, require('../pages/fund/FundList'));
        });
      }
    }],
    childRoutes: [{
      path: 'certification',
      transition: 'from-right',
      getComponent: function getComponent(location, callback) {
        require.ensure([], function (require) {
          callback(null, require('../pages/fund/FundCertification'));
        });
      }
    }]
  }, _activity2.default, _employer2.default, {
    // 金币相关
    component: _layout2.default,
    childRoutes: [{
      // 签到
      path: 'signin',
      getComponent: function getComponent(location, callback) {
        require.ensure([], function (require) {
          callback(null, require('pages/integral/signin'));
        });
      }
    }, {
      // 商城
      path: 'integral-mall',
      getComponent: function getComponent(location, callback) {
        require.ensure([], function (require) {
          callback(null, require('pages/integral/mall'));
        });
      }
    }, {
      // 商城
      path: 'integral/mall/:id',
      getComponent: function getComponent(location, callback) {
        require.ensure([], function (require) {
          callback(null, require('pages/integral/mall-category'));
        });
      }
    }, {
      // 任务
      path: 'integral/tasks',
      getComponent: function getComponent(location, callback) {
        require.ensure([], function (require) {
          callback(null, require('pages/integral/tasks'));
        });
      }
    }, {
      // 砸蛋
      path: 'integral/eggs',
      getComponent: function getComponent(location, callback) {
        require.ensure([], function (require) {
          callback(null, require('pages/integral/eggs'));
        });
      }
    }]
  }, {
    // path: 'integral/signin', // 金币签到
    // indexRoute: [{
    //   getComponent (location, callback) {
    //     require.ensure([], function (require) {
    //       callback(null, require('pages/signin/index'))
    //     })
    //   }
    // }],
    // childRoutes: [{
    path: 'signin/detailed',
    getComponent: function getComponent(location, callback) {
      require.ensure([], function (require) {
        callback(null, require('pages/signin/detailed'));
      });
    }
    // }]

  }, {
    path: 'misc',
    childRoutes: [{
      path: 'flow', // 流量引入
      transaction: 'from-left',
      getComponent: function getComponent(location, callback) {
        require.ensure([], function (require) {
          callback(null, require('pages/misc/flow'));
        });
      }
    }, {
      path: 'business', // 官网招募合作
      transaction: 'from-left',
      getComponent: function getComponent(location, callback) {
        require.ensure([], function (require) {
          callback(null, require('pages/misc/business'));
        });
      }
    }, {
      path: 'instruction', // 说明
      childRoutes: [{
        path: 'coupon', // 流量引入
        transaction: 'from-left',
        getComponent: function getComponent(location, callback) {
          require.ensure([], function (require) {
            callback(null, require('pages/misc/instruction/coupon'));
          });
        }
      }]
    }, {
      path: 'approve', // 借贷认证
      indexRoute: [{
        getComponent: function getComponent(location, callback) {
          require.ensure([], function (require) {
            callback(null, require('pages/misc/approve'));
          });
        }
      }],
      childRoutes: [{
        path: 'login',
        getComponent: function getComponent(location, callback) {
          require.ensure([], function (require) {
            callback(null, require('pages/misc/approve/login'));
          });
        }
      }]
    }, {
      path: 'app-mart', // 应用市场
      indexRoute: [{
        getComponent: function getComponent(location, callback) {
          require.ensure([], function (require) {
            callback(null, require('pages/misc/app-mart'));
          });
        }
      }],
      childRoutes: [{
        path: 'detail',
        getComponent: function getComponent(location, callback) {
          require.ensure([], function (require) {
            callback(null, require('pages/misc/app-mart/detail'));
          });
        }
      }, {
        path: 'cate',
        getComponent: function getComponent(location, callback) {
          require.ensure([], function (require) {
            callback(null, require('pages/misc/app-mart/cate'));
          });
        }
      }]
    }]
  }, {
    path: 'cash-bonus', // 现金红包
    indexRoute: [{
      getComponent: function getComponent(location, callback) {
        require.ensure([], function (require) {
          callback(null, require('pages/cash-bonus/index'));
        });
      }
    }],
    childRoutes: [{
      path: 'withdrawal', // 提现
      transaction: 'from-left',
      getComponent: function getComponent(location, callback) {
        require.ensure([], function (require) {
          callback(null, require('pages/cash-bonus/withdrawal'));
        });
      }
    }, {
      path: 'instruction', // 提现详情
      transaction: 'from-left',
      getComponent: function getComponent(location, callback) {
        require.ensure([], function (require) {
          callback(null, require('pages/cash-bonus/instruction'));
        });
      }
    }]
  }, {
    // path: 'integral-mall', // 积分商城
    // indexRoute: [{
    //   transaction: 'from-left',
    //   getComponent (location, callback) {
    //     require.ensure([], function (require) {
    //       callback(null, require('pages/integral-mall/index'))
    //     })
    //   }
    // }],
    // childRoutes: [{
    path: 'integral-mall/details', // 查看详情
    transaction: 'from-left',
    getComponent: function getComponent(location, callback) {
      require.ensure([], function (require) {
        callback(null, require('pages/integral-mall/details'));
      });
    }
    // }]

  }]
}];

if (process.env.NODE_ENV !== 'production') {
  rootRoute[rootRoute.length - 1].childRoutes.push({
    path: 'test',
    transition: 'from-up',
    indexRoute: [{
      transition: 'from-up',
      getComponent: function getComponent(location, callback) {
        require.ensure([], function (require) {
          callback(null, require('../pages/Test'));
        });
      }
    }]
  });
}

var App = function (_React$Component) {
  (0, _inherits3.default)(App, _React$Component);

  function App() {
    (0, _classCallCheck3.default)(this, App);
    return (0, _possibleConstructorReturn3.default)(this, (App.__proto__ || (0, _getPrototypeOf2.default)(App)).apply(this, arguments));
  }

  (0, _createClass3.default)(App, [{
    key: 'render',
    value: function render() {
      return _react2.default.createElement(_reactRedux.Provider, { store: _store2.default }, _react2.default.createElement(_reactRouter.Router, { routes: rootRoute, history: process.env.NODE_ENV === 'debug' ? _reactRouter.hashHistory : _reactRouter.browserHistory, render: routerTransition }));
    }
  }]);
  return App;
}(_react2.default.Component);

exports.default = App;