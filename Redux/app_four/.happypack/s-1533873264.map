{"version":3,"sources":["src\\js\\utils.js"],"names":["share","partake","sendEventSDK","census","login","get","post","copy","forwardApp","openApp","hrefNative","back","goHome","goCertification","retrievePassword","callBrowser","navLeftButton","navLeftButtonBack","Uri","hostname","location","reg","regR","m","match","domain","credit","api","h5","h","protocol","resolveUrl","url","arr","replace","redirect","process","env","NODE_ENV","platform","u","navigator","userAgent","versions","split","isApp","indexOf","isAndroid","isIos","isWeixin","isQQ","version","length","key","params","script","document","createElement","src","onload","parameter","k","v","body","appendChild","defaults","window","nativeMethod","shareMethod","tick","mj","_fmOpt","partner","appName","token","cimg","Image","imgLoaded","_saber","partnerId","tokenKey","createCount","Date","getTime","toFixed","localStorage","setItem","_vds","push","tid","callback","async","source","inviteCode","redirectUrl","href","encodeURIComponent","stringify","text","tips","copyTextMethod","openAppCallback","openUrl","checkOpen","cb","_clickTime","check","elsTime","hidden","webkitHidden","_count","intHandle","setInterval","clearInterval","ifr","style","display","opened","setTimeout","removeChild","urlSchema","type","returnNativeMethod","fn","registerCallBack","toString"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;QAsFgB,A,Q,AAAA;QA2BA,A,U,AAAA;Q,AAeA,e,AAAA;Q,AAwBA,S,AAAA;QA2BA,A,Q,AAAA;Q,AAgBA,M,AAAA;Q,AAUA,O,AAAA;Q,AAIA,O,AAAA;QAIA,A,a,AAAA;Q,AAmDA,U,AAAA;QAaA,A,a,AAAA;QAUA,A,O,AAAA;Q,AAKA,S,AAAA;QASA,A,kB,AAAA;Q,AASA,mBAAA,A;Q,AASA,cAAA,A;Q,AAQA,gBAAA,A;QAMA,A,oB,AAAA;;AA7UhB;;AACA;;;;AACA;;;;;;;;AAEA,IAAI,kBAAmB,AACrB;MAAI,WAAW,SAAf,AAAwB,AACxB;MAAI,MAAJ,AAAU,AACV;MAAI,OAAJ,AAAW,AACX;MAAI,IAAI,SAAA,AAAS,MAAjB,AAAQ,AAAe,AAEvB;;MAAI;YAAS,AACH,AACR;SAFW,AAEN,AACL;QAHW,AAGP,AACJ;OAAG,OAAO,SAAP,AAAgB,WAJR,AAImB,AAC9B;OAAG,OAAO,SAAP,AAAgB,WALrB,AAAa,AAKmB,AAGhC;AARa,AACX;;MAOE,MAAJ,AAAU,MAAM,AACd;QAAI,EAAA,AAAE,OAAN,AAAa,KAAK,AAChB;;gBACU,SAAA,AAAS,WADV,AACqB,AAC5B;aAAK,SAAA,AAAS,WAFP,AAEkB,AACzB;YAAI,SAAA,AAAS,WAHN,AAGiB,AACxB;WAAG,SAAA,AAAS,WAJL,AAIgB,AACvB;WAAG,SAAA,AAAS,WALd,AAAS,AAKgB,AAE1B;AAPU,AACP;AAQJ;;QAAI,EAAA,AAAE,OAAN,AAAa,SAAS,AACpB;;gBACU,SAAA,AAAS,WADV,AACqB,AAC5B;aAAK,SAAA,AAAS,WAFP,AAEkB,AACzB;YAAI,SAAA,AAAS,WAHN,AAGiB,AACxB;WAAG,SAAA,AAAS,WAJL,AAIgB,AACvB;WAAG,SAAA,AAAS,WALd,AAAS,AAKgB,AAE1B;AAPU,AACP;AAQJ;;QAAI,EAAA,AAAE,OAAN,AAAa,UAAU,AACrB;;gBACU,SAAA,AAAS,WADV,AACqB,AAC5B;aAAK,SAAA,AAAS,WAFP,AAEkB,AACzB;YAAI,SAAA,AAAS,WAHN,AAGiB,AACxB;WAAG,SAAA,AAAS,WAJL,AAIgB,AACvB;WAAG,SAAA,AAAS,WALd,AAAS,AAKgB,AAE1B;AAPU,AACP;AAQJ;;QAAI,aAAJ,AAAiB,kBAAkB,AACjC;;gBACU,SAAA,AAAS,WAAT,AAAoB,OAAO,SAA3B,AAAoC,WADrC,AACgD,AACvD;aAAK,SAAA,AAAS,WAAT,AAAoB,OAAO,SAA3B,AAAoC,WAFlC,AAE6C,AACpD;YAAI,SAAA,AAAS,WAAT,AAAoB,OAAO,SAA3B,AAAoC,WAHjC,AAG4C,AACnD;WAAG,SAAA,AAAS,WAAT,AAAoB,OAAO,SAA3B,AAAoC,WAJzC,AAAS,AAI2C,AAErD;AANU,AACP;AAML;AAED;;;gBACc,oBAAA,AAAU,KAAK,AACzB;UAAI,MAAM,IAAA,AAAI,MAAd,AAAU,AAAU,AACpB;UAAI,OAAO,IAAX,AAAI,AAAO,AAAI,KAAK,AAClB;eAAO,IAAA,AAAI,QAAJ,AAAY,MAAM,OAAO,IAAhC,AAAO,AAAkB,AAAO,AAAI,AACrC;AACF;AANI,AAOL;YAPF,AAAO,AAOG,AAEX;AATQ,AACL;AAxDJ,AAAW,CAAA;;AAkEJ,IAAM,8BAAW,QAAA,AAAQ,IAAR,AAAY,+DAA7B;AACA,IAAM,kCAAa,SAAb,AAAa,WAAA,AAAC,KAAQ,AAAE;SAAO,IAAA,AAAI,WAAX,AAAO,AAAe,AAAM;AAA1D;;AAEA,IAAM,0CAAwB,AACnC;MAAM,IAAI,UAAV,AAAoB,AACpB;MAAM,WAAW,EAAA,AAAE,MAAnB,AAAiB,AAAQ,AACzB;;WACS,EAAA,AAAE,QAAF,AAAU,YAAY,CADxB,AACyB,AAC9B;eAAW,EAAA,AAAE,QAAF,AAAU,aAAa,CAAvB,AAAwB,KAAK,EAAA,AAAE,QAAF,AAAU,SAAS,CAFtD,AAEuD,GAAG,AAC/D;WAAO,CAAC,CAAC,EAAA,AAAE,MAHN,AAGI,AAAQ,kCAAkC,AACnD;cAAU,EAAA,AAAE,QAAF,AAAU,oBAAoB,CAJnC,AAIoC,GAAG,AAC5C;UAAM,EAAA,AAAE,MAAF,AAAQ,aALT,AAKsB,MAAM,AACjC;aAAS,SAAS,SAAA,AAAS,SAN7B,AAAO,AAMI,AAA2B,AAEvC;AARQ,AACL;AAJG,AAAkB,CAAA;;AAalB,SAAA,AAAS,MAAT,AAAgB,KAAhB,AAAqB,QAAQ,AAClC;MAAM,SAAS,SAAA,AAAS,cAAxB,AAAe,AAAuB,AACtC;SAAA,AAAO,MAAP,AAAa,AACb;SAAA,AAAO,SAAS,YAAM,AACpB;QAAM,SAAS,SAAA,AAAS,cAAxB,AAAe,AAAuB,AACtC;QAAA,AAAI,QAAQ,AACV;UAAI,YADM,AACV,AAAgB;sCADN;8BAAA;2BAAA;;UAEV;wDAAmB,uBAAnB,AAAmB,AAAe,mHAAS;sEAAA;cAAjC,AAAiC,gBAAA;cAA9B,AAA8B,gBACzC;;sBAAA,AAAe,kBAAf,AAA4B,UAA5B,AAAiC,AAClC;AAJS;oBAAA;4BAAA;yBAAA;gBAAA;YAAA;8DAAA;sBAAA;AAAA;kBAAA;iCAAA;kBAAA;AAAA;AAAA;AAKV;;aAAA,AAAO,MAAM,6EAAA,AAA2E,MAAxF,AAAa,AAAiF,AAC/F;AAND,WAMO,AACL;aAAA,AAAO,MAAM,6EAAb,AAAa,AAA2E,AACzF;AACD;aAAA,AAAS,KAAT,AAAc,YAAd,AAA0B,AAC3B;AAZD,AAaA;WAAA,AAAS,KAAT,AAAc,YAAd,AAA0B,AAC3B;;AACD;;;;;;;;;AASO,SAAA,AAAS,QAAT,AAAkB,QAAQ,AAC/B;MAAI;mBAAW,AACE,AACf;kBAFa,AAEC,AACd;iBAHa,AAGA,AACb;kBAJa,AAIC,AACd;YALa,AAKL,AACR;gBANa,AAMD,AACZ;gBAPa,AAOD,AACZ;iBARF,AAAe,AAQA,AAEf;AAVe,AACb;wBASF,AAAc,UAAd,AAAwB,AACxB;SAAA,AAAO,gBAAgB,OAAA,AAAO,aAAP,AAAoB,YAAY,yBAAvD,AAAuB,AAAgC,AAAe,AACvE;;;AAEM,SAAA,AAAS,aAAT,AAAuB,MAAM,AAClC;AACA;SAAA,AAAO,GAAP,AAAU,cAAc,EAAC,MAAzB,AAAwB,AAAO,AAE/B;;AACA;SAAA,AAAO;aAAS,AACL,AACT;aAFc,AAEL,AACT;WAHF,AAAgB,AAGP,AAET;AALgB,AACd;MAIE,OAAO,IAAX,AAAW,AAAI,AACf;OAAA,AAAK,SAAS,YAAY,AACxB;WAAA,AAAO,OAAP,AAAc,YAAd,AAA0B,AAC3B;AAFD,AAGA;OAAA,AAAK,MAAM,iGAAX,AAA4G,AAC5G;AAEA;;SAAA,AAAO;eAAS,AACH,AACX;cAFF,AAAgB,AAEJ,AAEZ;AAJgB,AACd;cAGU,+CAA+C,CAAC,IAAA,AAAI,OAAJ,AAAW,YAAZ,AAAwB,SAAxB,AAAiC,QAA5F,AAA2D,AAAyC,AACrG;;;AAEM,SAAA,AAAS,SAAU,AACxB;MAAI,OAAJ,AAAW,cAAc,AACvB;iBAAA,AAAa,QAAb,AAAqB,aAArB,AAAkC,AACnC;AAED;;cAAA,AAAY,AAEZ;;SAAA,AAAO,OAAO,OAAA,AAAO,QAArB,AAA6B,AAC7B;SAAA,AAAO,KAAP,AAAY,KAAK,CAAA,AAAC,gBAAlB,AAAiB,AAAiB,AAClC;cAAA,AAAY,AACZ;AACA;cAAA,AAAY,8CAA8C,YAAY,AACpE;WAAA,AAAO,GAAP,AAAU;WAAc,AACjB,AACL;WAFF,AAAwB,AAEjB,AAER;AAJyB,AACtB;AAFJ,AAMD;;;AAED,SAAA,AAAS,YAAT,AAAsB,KAAtB,AAA2B,UAAU,AACnC;MAAM,SAAS,SAAA,AAAS,cAAxB,AAAe,AAAuB,AACtC;SAAA,AAAO,MAAP,AAAa,AACb;SAAA,AAAO,SAAP,AAAgB,AAChB;SAAA,AAAO,QAAP,AAAe,AACf;WAAA,AAAS,KAAT,AAAc,YAAd,AAA0B,AAC3B;;;AAEM,SAAA,AAAS,QAA8C;MAAvC,AAAuC,6EAA9B,AAA8B;MAAxB,AAAwB,iFAAX,AAAW;MAAL,AAAK,gBAC5D;;MAAI,cAAc,OAAO,SAAzB,AAAkC,AAClC;MAAI,IAAI,SAAA,AAAS,QAAT,AAAiB,yCAAyC,WAAW,qEAAqE,mBAAlJ,AAAkE,AAAgF,AAAmB,AACrK;MAAI,WAAA,AAAW,QAAQ,CAAC,SAAxB,AAAiC,OAAO,AACtC;yBAAA,AAAmB,AACpB;AACD;MAAI,eAAA,AAAe,QAAQ,CAAC,SAA5B,AAAqC,OAAO,AAC1C;0BAAA,AAAoB,AACrB;AACD;WAAA,AAAS,OAAT,AAAgB,AACjB;;;AAED;;;;AAIO,SAAA,AAAS,IAAT,AAAc,KAAoB;MAAf,AAAe,6EAAN,AAAM,AACvC;;MAAI,WAAJ,AAAe,MAAM,AACnB;UAAM,MAAA,AAAM,MAAM,aAAA,AAAG,UAArB,AAAkB,AAAa,AAChC;AACD;SAAO,gBAAA,AAAM,IAAI,WAAjB,AAAO,AAAU,AAAW,AAC7B;;AACD;;;;AAIO,SAAA,AAAS,KAAT,AAAe,KAAf,AAAoB,QAAQ,AACjC;SAAO,gBAAA,AAAM,KAAK,WAAX,AAAW,AAAW,MAAM,aAAA,AAAG,UAAtC,AAAO,AAA4B,AAAa,AACjD;;;AAEM,SAAA,AAAS,KAAT,AAAe,MAAsB;MAAhB,AAAgB,2EAAT,AAAS,AAC1C;;SAAA,AAAO,gBAAgB,OAAA,AAAO,aAAP,AAAoB,eAAe,cAAA,AAAc,OAAd,AAAqB,cAArB,AAAmC,OAA7F,AAAuB,AAA6E,AACrG;;;AAEM,SAAA,AAAS,aAAc,AAC5B;MAAI,SAAA,AAAS,aAAa,CAAC,SAA3B,AAAoC,UAAU,AAC5C;WAAA,AAAO,SAAP,AAAgB,OAAhB,AAAuB,AACvB;AACD;AACD;MAAI,SAAA,AAAS,SAAS,CAAC,SAAvB,AAAgC,UAAU,AACxC;WAAA,AAAO,SAAP,AAAgB,OAAhB,AAAuB,AACvB;AACD;AACD;SAAA,AAAO,SAAP,AAAgB,OAAhB,AAAuB,AACxB;;;AAED,SAAA,AAAS,gBAAT,AAA0B,SAA1B,AAAmC,UAAU,AAC3C;AACA;WAAA,AAAS,UAAT,AAAoB,IAAI,AACtB;QAAI,aAAa,CAAE,IAAnB,AAAmB,AAAI,AACvB;aAAA,AAAS,MAAT,AAAgB,SAAS,AACvB;UAAI,UAAA,AAAU,QAAQ,SAAlB,AAA2B,UAAU,SAAzC,AAAkD,cAAc,AAC9D;WAAA,AAAG,AACJ;AAFD,aAEO,AACL;WAAA,AAAG,AACJ;AACF;AACD;AACA;QAAI,SAAJ,AAAa;QAAG,YAAhB,AAA4B,AAC5B;4BAAwB,YAAY,AAClC;AACA;UAAI,UAAU,CAAE,IAAF,AAAE,AAAI,SAApB,AAA8B,AAC9B;UAAI,UAAA,AAAU,OAAO,UAArB,AAA+B,MAAM,AACnC;sBAAA,AAAc,AACd;cAAA,AAAM,AACP;AACF;AAPW,KAAA,EAAZ,AAAY,AAOT,AACJ;AAED;;AACA;MAAI,MAAM,SAAA,AAAS,cAAnB,AAAU,AAAuB,AACjC;MAAA,AAAI,MAAJ,AAAU,AACV;MAAA,AAAI,MAAJ,AAAU,UAAV,AAAoB,AACpB;MAAA,AAAI,UAAU,AACZ;cAAU,UAAA,AAAU,QAAQ,AAC1B;kBAAY,SAAZ,AAAY,AAAS,AACtB;AAFD,AAGD;AAED;;WAAA,AAAS,KAAT,AAAc,YAAd,AAA0B,AAC1B;aAAW,YAAY,AACrB;aAAA,AAAS,KAAT,AAAc,YAAd,AAA0B,AAC3B;AAFD,KAAA,AAEG,AACJ;;;AAEM,SAAA,AAAS,UAAW,AACzB;MAAI,YAAY,SAAA,AAAS,YAAT,AAAqB,uCAAuC,SAAA,AAAS,QAAT,AAAiB,qBAA7F,AAAkH,AAClH;MAAI,cAAJ,AAAkB,MAAM,AACtB;AACA;AACD;AACD;kBAAA,AAAgB,WAAW,UAAA,AAAC,QAAW,AACrC;QAAI,CAAJ,AAAK,QAAQ,AACX;AACD;AACF;AAJD,AAKD;;;AAEM,SAAA,AAAS,WAAT,AAAqB,MAArB,AAA2B,KAAK,AACrC;MAAI,SAAS,EAAC,QAAd,AAAa,AAAS,AACtB;MAAA,AAAI,KAAK,AACP;aAAS,EAAC,QAAD,AAAS,MAAM,OAAxB,AAAS,AAAsB,AAChC;AACD;SAAA,AAAO,gBAAgB,OAAA,AAAO,aAAP,AAAoB,mBAAmB,yBAA9D,AAAuB,AAAuC,AAAe,AAC7E;AACD;;;AAED;AACO,SAAA,AAAS,OAAQ,AACtB;aAAA,AAAW,AACZ;;;AAED;AACO,SAAA,AAAS,SAAU,AACxB;MAAI,CAAC,SAAL,AAAc,OAAO,AACnB;aAAA,AAAS,OAAO,WAAhB,AAAgB,AAAW,AAC3B;AACD;AACD;aAAA,AAAW,AACZ;;;AAED;AACO,SAAA,AAAS,kBAAmB,AACjC;MAAI,CAAC,SAAL,AAAc,OAAO,AACnB;aAAA,AAAS,OAAO,WAAhB,AAAgB,AAAW,AAC3B;AACD;AACD;aAAA,AAAW,AACZ;;;AAED;AACO,SAAA,AAAS,mBAAoB,AAClC;MAAI,SAAJ,AAAa,OAAO,AAClB;eAAA,AAAW,AACZ;AAFD,SAEO,AACL;aAAA,AAAS,OAAO,WAAW,4EAA4E,mBAAmB,SAA1H,AAAgB,AAAuF,AAA4B,AACpI;AACF;;;AAED;AACO,SAAA,AAAS,YAAT,AAAsB,KAAK,AAChC;MAAI,SAAJ,AAAa,OAAO,AAClB;eAAA,AAAW,IAAX,AAAe,AAChB;AAFD,SAEO,AACL;aAAA,AAAS,OAAT,AAAgB,AACjB;AACF;;;AAEM,SAAA,AAAS,cAAT,AAAwB,IAAI,AACjC;MAAI,OAAA,AAAO,gBAAgB,OAAA,AAAO,aAAlC,AAA+C,kBAAkB,AAC/D;WAAA,AAAO,aAAP,AAAoB,iBAAiB,MAAM,GAAN,AAAM,AAAG,aAA9C,AAA2D,AAC5D;AACF;;;AAEM,SAAA,AAAS,oBAAqB,AACnC;gBAAA,AAAc,AACf","file":"utils.js","sourceRoot":"E:/MyStudy/Redux/app_four","sourcesContent":["import { browserHistory, hashHistory } from 'react-router'\r\nimport axios from 'axios'\r\nimport qs from 'qs'\r\n\r\nlet Uri = (function () {\r\n  var hostname = location.hostname\r\n  var reg = /(?:http(?:s)?:\\/\\/)?(?:www\\.)?(.*?)\\./\r\n  var regR = /https?:\\/\\/(?:[^/]+\\.)?([^./]+\\.(?:com))(?:$|\\/)/\r\n  var m = hostname.match(reg)\r\n\r\n  var domain = {\r\n    credit: 'http://192.168.39.214/kdkj/credit/web/',\r\n    api: 'http://192.168.39.214/kdkj/frontend/web/',\r\n    h5: 'http://192.168.39.214/kdkj/h5/mobile/web/',\r\n    h: '//' + location.hostname + ':8000/',\r\n    m: '//' + location.hostname + '/mobile/web/'\r\n  }\r\n\r\n  if (m !== null) {\r\n    if (m[1] === 'h') {\r\n      domain = {\r\n        credit: location.protocol + '//credit.xianjincard.com/',\r\n        api: location.protocol + '//api.xianjincard.com/',\r\n        h5: location.protocol + '//h5.xianjincard.com/',\r\n        h: location.protocol + '//h.xianjincard.com/',\r\n        m: location.protocol + '//m.xianjincard.com/'\r\n      }\r\n    }\r\n\r\n    if (m[1] === 'pre-h') {\r\n      domain = {\r\n        credit: location.protocol + '//pre-credit.xianjincard.com/',\r\n        api: location.protocol + '//pre-api.xianjincard.com/',\r\n        h5: location.protocol + '//pre-h5.xianjincard.com/',\r\n        h: location.protocol + '//pre-h.xianjincard.com/',\r\n        m: location.protocol + '//pre-m.xianjincard.com/'\r\n      }\r\n    }\r\n\r\n    if (m[1] === 'test-h') {\r\n      domain = {\r\n        credit: location.protocol + '//test-credit.xianjincard.com/',\r\n        api: location.protocol + '//test-api.xianjincard.com/',\r\n        h5: location.protocol + '//test-h5.xianjincard.com/mobile/web/',\r\n        h: location.protocol + '//test-h.xianjincard.com/',\r\n        m: location.protocol + '//test-m.xianjincard.com/'\r\n      }\r\n    }\r\n\r\n    if (hostname === '192.168.39.214') {\r\n      domain = {\r\n        credit: location.protocol + '//' + location.hostname + '/kdkj/credit/web/',\r\n        api: location.protocol + '//' + location.hostname + '/kdkj/frontend/web/',\r\n        h5: location.protocol + '//' + location.hostname + '/kdkj/h5/mobile/web/',\r\n        m: location.protocol + '//' + location.hostname + '/kdkj/mobile/web/'\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    resolveUrl: function (url) {\r\n      var arr = url.match(reg)\r\n      if (domain[arr[1]]) {\r\n        return url.replace(regR, domain[arr[1]])\r\n      }\r\n    },\r\n    domain: domain\r\n  }\r\n}())\r\n\r\nexport const redirect = process.env.NODE_ENV === `debug` ? hashHistory : browserHistory\r\nexport const resolveUrl = (url) => { return Uri.resolveUrl(url) }\r\n\r\nexport const platform = (function () {\r\n  const u = navigator.userAgent\r\n  const versions = u.split('/')\r\n  return {\r\n    isApp: u.indexOf('kdxj') !== -1,\r\n    isAndroid: u.indexOf('Android') > -1 || u.indexOf('Adr') > -1, // android终端\r\n    isIos: !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/), // ios终端\r\n    isWeixin: u.indexOf('MicroMessenger') > -1, // 是否微信 （2015-01-22新增）\r\n    isQQ: u.match(/\\sQQ/i) === 'qq', // 是否QQ\r\n    version: versions[versions.length - 1]\r\n  }\r\n}())\r\n\r\nexport function share (key, params) {\r\n  const script = document.createElement('script')\r\n  script.src = '//res.wx.qq.com/open/js/jweixin-1.0.0.js'\r\n  script.onload = () => {\r\n    const script = document.createElement('script')\r\n    if (params) {\r\n      let parameter = ''\r\n      for (let [k, v] of Object.entries(params)) {\r\n        parameter = `${parameter}&${k}=${v}`\r\n      }\r\n      script.src = resolveUrl(`https://credit.xianjincard.com/activity/default/wx-share?key=${key}${parameter}`)\r\n    } else {\r\n      script.src = resolveUrl(`https://credit.xianjincard.com/activity/default/wx-share?key=${key}`)\r\n    }\r\n    document.body.appendChild(script)\r\n  }\r\n  document.body.appendChild(script)\r\n}\r\n/*\r\n  {\r\n  'share_title': '现金卡重金招募区域代理人！',\r\n  'share_body': '5000万赏金虚位以待，寻找与众不同的你，I want you！',\r\n  'share_url': 'https://h5.xianjincard.com/activity/reward/index.html',\r\n  'share_logo': 'http://h5.xianjincard.com/activity/reward/img/share.png',\r\n  'type': '1'\r\n  }\r\n*/\r\nexport function partake (params) {\r\n  var defaults = {\r\n    'share_title': '',\r\n    'share_body': '',\r\n    'share_url': '',\r\n    'share_logo': '',\r\n    'type': '0',\r\n    'platform': 'WEIXIN,WEIXIN_CIRCLE,QQ,QZONE,SMS_INVITE,SINA',\r\n    'callback': '',\r\n    'is_upload': '1'\r\n  }\r\n  Object.assign(defaults, params)\r\n  window.nativeMethod && window.nativeMethod.shareMethod(JSON.stringify(defaults))\r\n}\r\n\r\nexport function sendEventSDK (tick) {\r\n  // maxent\r\n  window.mj('activation', {tick: tick})\r\n\r\n  // 同盾\r\n  window._fmOpt = {\r\n    partner: 'koudailc',\r\n    appName: 'koudailc_h5_web',\r\n    token: tick\r\n  }\r\n  var cimg = new Image()\r\n  cimg.onload = function () {\r\n    window._fmOpt.imgLoaded = true\r\n  }\r\n  cimg.src = 'https://fp.fraudmetrix.cn/fp/clear.png?partnerCode=koudailc&appName=koudailc_h5_web&tokenId=' + tick\r\n  // createCount('//static.fraudmetrix.cn/fm.js?ver=0.1&t=' + (new Date().getTime() / 3600000).toFixed(0))\r\n\r\n  window._saber = {\r\n    partnerId: 'koudailc',\r\n    tokenKey: tick\r\n  }\r\n  createCount('//df.baiqishi.com/static/webdf/saber.js?t=' + (new Date().getTime() / 3600000).toFixed(0))\r\n}\r\n\r\nexport function census () {\r\n  if (window.localStorage) {\r\n    localStorage.setItem('isOpenApp', true)\r\n  }\r\n\r\n  createCount('//hm.baidu.com/hm.js?cb70b7ef18da057ea52aaf3b53609ec2')\r\n\r\n  window._vds = window._vds || []\r\n  window._vds.push(['setAccountId', '8fd2500ba4956d6d'])\r\n  createCount('//dn-growing.qbox.me/vds.js')\r\n  // maxent\r\n  createCount('//res.id-linking.com/js/mjsdk-1.4.3.min.js', function () {\r\n    window.mj('set_params', {\r\n      url: '//trk.mxtrk.com/jta/event',\r\n      tid: '79rctxsz5nkuc9dd9qax3ewf5hay691k'\r\n    })\r\n  })\r\n}\r\n\r\nfunction createCount (url, callback) {\r\n  const script = document.createElement('script')\r\n  script.src = url\r\n  script.onload = callback\r\n  script.async = true\r\n  document.body.appendChild(script)\r\n}\r\n\r\nexport function login (source = null, inviteCode = null, url) {\r\n  let redirectUrl = url || location.href\r\n  let u = platform.isApp ? 'koudaikj://app.launch/login/applogin' : resolveUrl('http://h5.xianjincard.com/mobile/index.html#/login?redirect_url=' + encodeURIComponent(redirectUrl))\r\n  if (source !== null && !platform.isApp) {\r\n    u += `&appMarket=${source}`\r\n  }\r\n  if (inviteCode !== null && !platform.isApp) {\r\n    u += `&inviteCode=${inviteCode}`\r\n  }\r\n  location.href = u\r\n}\r\n\r\n/*\r\n  url: http://api.xianjincard.com/accumulation-fund/check-login\r\n  params: {a:1, b:2}\r\n*/\r\nexport function get (url, params = null) {\r\n  if (params !== null) {\r\n    url = url + '?' + qs.stringify(params)\r\n  }\r\n  return axios.get(resolveUrl(url))\r\n}\r\n/*\r\n  url: http://api.xianjincard.com/accumulation-fund/check-login\r\n  params: {a:1, b:2}\r\n*/\r\nexport function post (url, params) {\r\n  return axios.post(resolveUrl(url), qs.stringify(params))\r\n}\r\n\r\nexport function copy (text, tips = '复制成功!') {\r\n  window.nativeMethod && window.nativeMethod.copyTextMethod('{\"text\":\"' + text + '\",\"tip\":\"' + tips + '\"}')\r\n}\r\n\r\nexport function forwardApp () {\r\n  if (platform.isAndroid && !platform.isWeixin) {\r\n    window.location.href = 'https://credit.xianjincard.com/download-app.html'\r\n    return\r\n  }\r\n  if (platform.isIos && !platform.isWeixin) {\r\n    window.location.href = 'https://itunes.apple.com/app/id1156410247?mt=8'\r\n    return\r\n  }\r\n  window.location.href = 'https://api.xianjincard.com/download-app.html'\r\n}\r\n\r\nfunction openAppCallback (openUrl, callback) {\r\n  // 检查app是否打开\r\n  function checkOpen (cb) {\r\n    var _clickTime = +(new Date())\r\n    function check (elsTime) {\r\n      if (elsTime > 3000 || document.hidden || document.webkitHidden) {\r\n        cb(1)\r\n      } else {\r\n        cb(0)\r\n      }\r\n    }\r\n    // 启动间隔20ms运行的定时器，并检测累计消耗时间是否超过3000ms，超过则结束\r\n    var _count = 0, intHandle = null\r\n    intHandle = setInterval(function () {\r\n      _count++\r\n      var elsTime = +(new Date()) - _clickTime\r\n      if (_count >= 100 || elsTime > 3000) {\r\n        clearInterval(intHandle)\r\n        check(elsTime)\r\n      }\r\n    }, 20)\r\n  }\r\n\r\n  // 在iframe 中打开APP\r\n  var ifr = document.createElement('iframe')\r\n  ifr.src = openUrl\r\n  ifr.style.display = 'none'\r\n  if (callback) {\r\n    checkOpen(function (opened) {\r\n      callback && callback(opened)\r\n    })\r\n  }\r\n\r\n  document.body.appendChild(ifr)\r\n  setTimeout(function () {\r\n    document.body.removeChild(ifr)\r\n  }, 2000)\r\n}\r\n\r\nexport function openApp () {\r\n  let urlSchema = platform.isAndroid ? 'xianjincard://com.kdlc.mcc/openapp' : platform.isIos ? 'xjbk915164674://' : null\r\n  if (urlSchema === null) {\r\n    forwardApp()\r\n    return\r\n  }\r\n  openAppCallback(urlSchema, (opened) => {\r\n    if (!opened) {\r\n      forwardApp()\r\n    }\r\n  })\r\n}\r\n\r\nexport function hrefNative (type, url) {\r\n  let params = {'type': type}\r\n  if (url) {\r\n    params = {'type': type, 'url': url}\r\n  }\r\n  window.nativeMethod && window.nativeMethod.returnNativeMethod(JSON.stringify(params))\r\n  //  window.nativeMethod && window.nativeMethod.returnNativeMethod('{\"type\" : \"0\"}')\r\n}\r\n\r\n// 退出webview\r\nexport function back () {\r\n  hrefNative(0)\r\n}\r\n\r\n// 跳转首页\r\nexport function goHome () {\r\n  if (!platform.isApp) {\r\n    location.href = resolveUrl('http://h.xianjincard.com/mobile')\r\n    return\r\n  }\r\n  hrefNative(4)\r\n}\r\n\r\n// 跳认证\r\nexport function goCertification () {\r\n  if (!platform.isApp) {\r\n    location.href = resolveUrl('http://h.xianjincard.com/mobile/certification')\r\n    return\r\n  }\r\n  hrefNative(3)\r\n}\r\n\r\n// 找回交易密码\r\nexport function retrievePassword () {\r\n  if (platform.isApp) {\r\n    hrefNative(2)\r\n  } else {\r\n    location.href = resolveUrl('https://h5.xianjincard.com/mobile/index.html#/my/findpaypassword?state=' + encodeURIComponent(location.href))\r\n  }\r\n}\r\n\r\n// 唤起浏览器跳转\r\nexport function callBrowser (url) {\r\n  if (platform.isApp) {\r\n    hrefNative(10, url)\r\n  } else {\r\n    location.href = url\r\n  }\r\n}\r\n\r\nexport function navLeftButton (fn) {\r\n  if (window.nativeMethod && window.nativeMethod.registerCallBack) {\r\n    window.nativeMethod.registerCallBack('(' + fn.toString() + '())')\r\n  }\r\n}\r\n\r\nexport function navLeftButtonBack () {\r\n  navLeftButton(back)\r\n}\r\n"]}