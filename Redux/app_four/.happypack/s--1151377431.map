{"version":3,"sources":["src\\js\\pages\\activity\\thursday-freeinterest\\index.js"],"names":["title","lock","Welcome","props","state","time","rules","visible","loaded","message","interceptors","response","use","code","data","indexOf","reject","resolve","document","loading","undefined","then","setState","hide","setTimeout","middleware","apply","catch","bind","isApp","window","location","href","wrapper","close","login"],"mappings":"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","file":"index.js","sourceRoot":"E:/MyStudy/Redux/app_four","sourcesContent":["/* eslint-disable */\r\nimport React, {Component} from 'react';\r\nimport {Modal, Toast} from 'antd-mobile';\r\nimport request from 'common/request';\r\nimport {share, platform, login, hrefNative, resolveUrl, forwardApp as download} from 'utils';\r\nimport Download from '../components/DownloadPopup';\r\n\r\nimport classnames from 'classnames';\r\nimport 'scss/components/reboot.component.scss';\r\nimport 'scss/activity/thursday-freeinterest.component.scss';\r\n\r\nlet title = '周四免息';\r\nlet lock = true;\r\n\r\nexport default class Welcome extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            time: '2017年3月23日00:00-3月23日24:00',\r\n            rules: 0,\r\n            visible: 0,\r\n            loaded: 0,\r\n            message: '',\r\n        };\r\n        request.interceptors.response.use(response => {\r\n            let {code, data, message} = response;\r\n            if([0, 1000].indexOf(code) < 0){\r\n                return Promise.reject(response);\r\n            }\r\n            return Promise.resolve(response);\r\n        });\r\n    }\r\n    componentDidMount(){\r\n        document.title = title;\r\n        // share('thursday-freeinterest');\r\n        Toast.loading(undefined, 0);\r\n        request('activity/interest-free-act/index').then(response => {\r\n            let {time} = response.data;\r\n            this.setState({\r\n                time,\r\n                loaded: 1\r\n            });\r\n            Toast.hide();\r\n        });\r\n    }\r\n    middleware(response){\r\n        let {code, message, visible = 1} = response;\r\n        if(code == -2024){\r\n            visible = 3;\r\n            message = '亲，免息奖励与你插肩而过，下个时间段可以继续领哦！';\r\n        }else if(code == -2025){\r\n            visible = 3;\r\n            message = '亲，您已获得免息券一张请至\"我的\"-\"优惠券\"中查看，券有效期一天，请立即使用';\r\n        }else if(code == -1001){\r\n            visible = 2;\r\n            message = '登陆态失效';\r\n        }else if(code == 0){\r\n            visible = 3;\r\n            message = '亲，恭喜你获得免息券一张请至\"我的\"-\"优惠券\"中查看，券有效期一天，请立即使用';\r\n        }else if(code == -2012){\r\n            visible = 1;\r\n            message = '活动未开始';\r\n        }else{\r\n            visible = 1;\r\n            message = '系统繁忙';\r\n        }\r\n        this.setState({\r\n            message\r\n        });\r\n        setTimeout(() => {\r\n            this.setState({\r\n                visible\r\n            });\r\n        });\r\n        lock = true;\r\n    }\r\n    rules(){\r\n        this.setState({\r\n            rules: 1\r\n        });\r\n    }\r\n    close(){\r\n        this.setState({\r\n            rules: 0,\r\n            visible: 0\r\n        });\r\n    }\r\n    apply(){\r\n        if(lock){\r\n            lock = !lock;\r\n            request('activity/interest-free-act/interest?tag=h5-20170405-interestFree_act').then(response => {\r\n                let {code, message} = response;\r\n                code == 0 && (response.message = '亲，恭喜你获得免息券一张请至\"我的\"-\"优惠券\"中查看');\r\n                this.middleware.apply(this, [response]);\r\n                lock = true;\r\n            }).catch(this.middleware.bind(this));\r\n        }\r\n    }\r\n    login(){\r\n        login();\r\n    }\r\n    loan(){\r\n        if(platform.isApp){\r\n            hrefNative(4);\r\n        }else{\r\n            window.location.href = resolveUrl('http://h5.xianjincard.com/mobile');\r\n        }\r\n    }\r\n    render(){\r\n        let {time, rules, visible, loaded, message} = this.state;\r\n        return (\r\n            <div className={classnames({wrapper: true, 'wrapper-thursday-freeinterest': true, loaded})}>\r\n                <div className='tips'>给你免息借，一起嗨起来</div>\r\n                <div className='button-receive' onClick={this.apply.bind(this)}>领取免息加油券</div>\r\n                <div className='rule'>\r\n                    <span onClick={this.rules.bind(this)}>查看规则</span>\r\n                </div>\r\n                <Modal visible={visible == 3} onClose={this.close.bind(this)} maskClosable={true} transparent>\r\n                    <p className='message'>{message}</p>\r\n                    <div class='button' onClick={this.close.bind(this)}>朕知道了</div>\r\n                </Modal>\r\n                <Modal visible={visible == 2} onClose={this.close.bind(this)} maskClosable={true} transparent>\r\n                    <p className='message'>{message}</p>\r\n                    <div class='button' onClick={this.login.bind(this)}>马上登录</div>\r\n                </Modal>\r\n                <Modal visible={visible == 1} onClose={this.close.bind(this)} maskClosable={true} transparent>\r\n                    <p className='message'>{message}</p>\r\n                    <div class='button' onClick={this.close.bind(this)}>朕知道了</div>\r\n                </Modal>\r\n                <Modal className='rules' visible={rules} onClose={this.close.bind(this)} maskClosable={true} transparent>\r\n                    <h5>活动规则</h5>\r\n                    <p>活动时间：{time}</p>\r\n                    <p>活动对象：平台注册用户</p>\r\n                    <p>活动奖励：点击“领取免息加油券”按钮，即有机会获得免息券。本活动共有1000个名额，0:00-8:00发放200个名额，8:00-16:00发放500个名额，16:00-24:00发放300个名额，随机发放</p>\r\n                    <p>免息券有效期自发放之日起1天内有效</p>\r\n                    <p>本活动最终解释权归现金卡所有，与Apple.Inc无关</p>\r\n                </Modal>\r\n                <Download/>\r\n            </div>\r\n        );\r\n    }\r\n};"]}