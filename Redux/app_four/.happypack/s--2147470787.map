{"version":3,"sources":["src\\js\\pages\\activity\\share\\Share.js"],"names":["Share","props","sign","timeout","codeFlag","state","contentFlag","inputFlag","ticketFlag","phoneNumber","password","code","codeText","invite_code","infoData","amount","expire_date","tel","document","title","query","location","loading","then","data","hide","href","encodeURIComponent","params","phone","is_new","setInfoData","data2","setState","message","alert","popupHtml","click","verifyPhone","paramsTwo","verfiy","activityId","source","clearTimeout","info","ticketHtml","ticketNodata","e","target","value","length","reg","test","setCodeText","number","l","setTimeout","inviteUrl","protocol","host","input","handleChangeTwo","bind","handleChangeThree","getCode","ticketContent","changePhone","__html","content","handleChange","receive","invite","Component"],"mappings":"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","file":"Share.js","sourceRoot":"E:/MyStudy/Redux/app_four","sourcesContent":["import React from 'react'\r\nimport { get, post, resolveUrl, forwardApp, share } from 'utils'\r\nimport Toast from '../../../components/Toast'\r\nimport Popup from '../components/Popup'\r\nimport Content from './Content'\r\nimport 'img/activity/share/share-12.png'\r\nimport 'scss/activity/share.component.scss'\r\n\r\nexport default class Share extends React.Component {\r\n  constructor (props) {\r\n    super(props)\r\n    this.sign = ''\r\n    this.timeout = ''\r\n    this.codeFlag = 1\r\n    this.state = {\r\n      contentFlag: false,\r\n      inputFlag: false,\r\n      ticketFlag: false,\r\n      phoneNumber: '',\r\n      password: '',\r\n      code: '',\r\n      codeText: '获取验证码',\r\n      invite_code: '',\r\n      infoData: {\r\n        amount: 0,\r\n        expire_date: '',\r\n        tel: ''\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidMount () {\r\n    document.title = '分享红包'\r\n    const query = this.props.location.query\r\n    this.sign = query.sign\r\n    share('share')\r\n    Toast.loading('')\r\n    get('http://credit.xianjincard.com/act/red-pack-act').then(data => data.data).then(data => {\r\n      if (data.code === -1001) {\r\n        Toast.hide()\r\n        location.href = resolveUrl('http://credit.xianjincard.com/wx/user-auth-template?redirectUrl=' + encodeURIComponent(location.href))\r\n        return\r\n      }\r\n      if (data.code === 0) {\r\n        if (data.data) {\r\n          const params = {\r\n            phone: data.data,\r\n            sign: this.sign,\r\n            is_new: 0\r\n          }\r\n          post('http://credit.xianjincard.com/act/get-red-pack', params).then(data => data.data).then(data2 => {\r\n            Toast.hide()\r\n            this.setInfoData(data2, data.data)\r\n            this.setState({\r\n              invite_code: (typeof data2.data.invite_code !== 'undefined') ? data2.data.invite_code : ''\r\n            })\r\n          })\r\n          return\r\n        }\r\n        Toast.hide()\r\n        this.setState({\r\n          contentFlag: true\r\n        })\r\n      } else {\r\n        Toast.hide()\r\n        const message = data.message ? data.message : '服务器繁忙，请稍候重试'\r\n        Popup.alert(Content.popupHtml(`${message}`), 'popup')\r\n        Popup.click('a.click')\r\n      }\r\n    })\r\n  }\r\n\r\n  receive () {\r\n    if (!this.state.inputFlag) {\r\n      const { phoneNumber } = this.state\r\n      if (this.verifyPhone(phoneNumber)) {\r\n        const params = {\r\n          phone: phoneNumber\r\n        }\r\n        Toast.loading('')\r\n        post('http://credit.xianjincard.com/act/check-user', params).then(data => data.data).then(data => {\r\n          if (data.code === 0) {\r\n            if (data.data.is_new) {\r\n              Toast.hide()\r\n              this.setState({\r\n                inputFlag: true\r\n              })\r\n              return\r\n            }\r\n            const paramsTwo = {\r\n              phone: phoneNumber,\r\n              sign: this.sign,\r\n              is_new: 0\r\n            }\r\n            post('http://credit.xianjincard.com/act/get-red-pack', paramsTwo).then(data => data.data).then(data2 => {\r\n              Toast.hide()\r\n              this.setInfoData(data2, phoneNumber)\r\n              this.setState({\r\n                phoneNumber: '',\r\n                invite_code: (typeof data2.data.invite_code !== 'undefined') ? data2.data.invite_code : ''\r\n              })\r\n            })\r\n          } else {\r\n            Toast.hide()\r\n            const message = data.message ? data.message : '服务器繁忙，请稍候重试'\r\n            Popup.alert(Content.popupHtml(`${message}`), 'popup')\r\n            Popup.click('a.click')\r\n          }\r\n        })\r\n      }\r\n    } else {\r\n      const { phoneNumber, password, code } = this.state\r\n      if (this.verfiy(phoneNumber, password, code)) {\r\n        Toast.loading('')\r\n        const activityId = 'ShareRed'\r\n        post(`http://credit.xianjincard.com/credit-user/register?appMarket=${activityId}`, {phone: phoneNumber, password: password, code: code, source: 21}).then(data => data.data).then(data => {\r\n          if (data.code === 0) {\r\n            Toast.hide()\r\n            const params = {\r\n              phone: phoneNumber,\r\n              sign: this.sign,\r\n              is_new: 1\r\n            }\r\n            post('http://credit.xianjincard.com/act/get-red-pack', params).then(data => data.data).then(data2 => {\r\n              Toast.hide()\r\n              this.codeFlag = 1\r\n              clearTimeout(this.timeout)\r\n              this.setInfoData(data2, phoneNumber)\r\n              this.setState({\r\n                codeText: '获取验证码',\r\n                phoneNumber: '',\r\n                password: '',\r\n                code: '',\r\n                invite_code: (typeof data2.data.invite_code !== 'undefined') ? data2.data.invite_code : ''\r\n              })\r\n            })\r\n          } else {\r\n            Toast.hide()\r\n            const message = data.message ? data.message : '服务器繁忙，请稍候重试'\r\n            Popup.alert(Content.popupHtml(`${message}`), 'popup')\r\n            Popup.click('a.click')\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  setInfoData (data2, phone) {\r\n    if (data2.code === -1004 || data2.code === -1002) {\r\n      this.setState({\r\n        contentFlag: true,\r\n        inputFlag: false\r\n      })\r\n      return\r\n    }\r\n    if (data2.code === -2010) {\r\n      this.setState({\r\n        infoData: {\r\n          amount: data2.data.amount,\r\n          expire_date: data2.data.expire_date,\r\n          tel: phone\r\n        },\r\n        contentFlag: false,\r\n        ticketFlag: true\r\n      })\r\n      Toast.info('你已领取过该红包哦~', 2)\r\n      return\r\n    }\r\n    if (data2.code === 0) {\r\n      this.setState({\r\n        infoData: {\r\n          amount: data2.data.amount,\r\n          expire_date: data2.data.expire_date,\r\n          tel: phone\r\n        },\r\n        contentFlag: false,\r\n        ticketFlag: true\r\n      })\r\n      return\r\n    }\r\n    const ticketHtml = Content.ticketNodata(data2.code)\r\n    this.setState({\r\n      contentFlag: false,\r\n      ticketFlag: false,\r\n      ticketHtml: ticketHtml\r\n    })\r\n    return\r\n  }\r\n\r\n  handleChange (e) {\r\n    if (e.target.value.length < 11) {\r\n      this.setState({\r\n        inputFlag: false\r\n      })\r\n    }\r\n    if (e.target.value.length > 11) {\r\n      return\r\n    }\r\n    this.setState({\r\n      phoneNumber: e.target.value\r\n    })\r\n  }\r\n\r\n  handleChangeTwo (e) {\r\n    this.setState({\r\n      password: e.target.value\r\n    })\r\n  }\r\n\r\n  handleChangeThree (e) {\r\n    if (e.target.value.length > 6) {\r\n      return\r\n    }\r\n    this.setState({\r\n      code: e.target.value\r\n    })\r\n  }\r\n\r\n  changePhone () {\r\n    this.setState({\r\n      contentFlag: true,\r\n      inputFlag: false\r\n    })\r\n  }\r\n\r\n  verifyPhone (phone) {\r\n    const reg = /^1(3|4|5|7|8)\\d{9}$/\r\n    if (phone === '') {\r\n      Popup.alert(Content.popupHtml('手机号不能为空哦~'), 'popup')\r\n      Popup.click('a.click')\r\n      return false\r\n    }\r\n    if (!reg.test(phone)) {\r\n      Popup.alert(Content.popupHtml('请输入正确的手机号哦~'), 'popup')\r\n      Popup.click('a.click')\r\n      return false\r\n    }\r\n    return true\r\n  }\r\n\r\n  verfiy (phoneNumber, password, code) {\r\n    if (this.verifyPhone(phoneNumber)) {\r\n      if (password === '') {\r\n        Popup.alert(Content.popupHtml('请设置你的登录密码哦~'), 'popup')\r\n        Popup.click('a.click')\r\n        return false\r\n      }\r\n      if (password.length < 6) {\r\n        Popup.alert(Content.popupHtml('密码不能小于6位哦~'), 'popup')\r\n        Popup.click('a.click')\r\n        return false\r\n      }\r\n      if (code === '') {\r\n        Popup.alert(Content.popupHtml('请输入验证码哦~'), 'popup')\r\n        Popup.click('a.click')\r\n        return false\r\n      }\r\n    } else {\r\n      return false\r\n    }\r\n    return true\r\n  }\r\n\r\n  getCode () {\r\n    const phone = this.state.phoneNumber\r\n    if (this.verifyPhone(phone) && this.codeFlag) {\r\n      Toast.loading('')\r\n      post('http://api.xianjincard.com/user/reg-get-code', {phone: phone}).then(data => data.data).then(data => {\r\n        Toast.hide()\r\n        if (data.code === 0) {\r\n          this.setCodeText(60)\r\n          return\r\n        }\r\n        Popup.alert(Content.popupHtml(''), 'popup')\r\n        Popup.click('a.click')\r\n      })\r\n    }\r\n  }\r\n\r\n  setCodeText (number, l) {\r\n    this.timeout = setTimeout(() => {\r\n      let codeText = number + '秒后重试'\r\n      this.setState({\r\n        codeText: codeText\r\n      })\r\n      if (number) {\r\n        this.codeFlag = 0\r\n        this.setCodeText(--number, 1000)\r\n      } else {\r\n        this.codeFlag = 1\r\n        this.setState({\r\n          codeText: '重新发送'\r\n        })\r\n      }\r\n    }, l)\r\n  }\r\n\r\n  invite () {\r\n    const inviteUrl = `${location.protocol}//${location.host}/activity/invite?invite_code=${this.state.invite_code}`\r\n    location.href = inviteUrl\r\n  }\r\n\r\n  render () {\r\n    const { contentFlag, inputFlag, codeText, ticketFlag, ticketHtml, infoData } = this.state\r\n\r\n    const input = inputFlag ? <div><input className='password' type='password' placeholder='设置登录密码' value={this.state.password} onChange={this.handleChangeTwo.bind(this)} />\r\n      <p className='special clearfix'>\r\n        <input className='code' type='text' placeholder='输入验证码' value={this.state.code} onChange={this.handleChangeThree.bind(this)} />\r\n        <a className='a-code' onClick={this.getCode.bind(this)}>{codeText}</a>\r\n      </p></div> : null\r\n\r\n    const ticketContent = ticketFlag ? <div className='ticket clearfix'>\r\n      <div className='left'>\r\n        <p><b>{infoData.amount}</b>元</p>\r\n        <p>分享红包抵扣券</p>\r\n      </div>\r\n      <div className='right'>\r\n        <p>限借款金额：满<b>1000</b>元</p>\r\n        <p>限借款期限: <b>14</b>天以上</p>\r\n        <p>有效期至: {infoData.expire_date}</p>\r\n      </div>\r\n      <p className='account'>红包已发放至账户\r\n      <a onClick={this.changePhone.bind(this)}>{infoData.tel} 修改></a></p>\r\n    </div> : <div className='ticket no-data' dangerouslySetInnerHTML={{__html: ticketHtml}} />\r\n\r\n    const content = contentFlag ? <div className='receive-content'>\r\n      <i className='red' />\r\n      <p>请下载APP登录后方可使用红包</p>\r\n      <input className='phone' ref='phoneInput' type='text' placeholder='请输入手机号' value={this.state.phoneNumber} onChange={this.handleChange.bind(this)} />\r\n      {input}\r\n      <a className='a-receive' onClick={this.receive.bind(this)}>立即领取</a>\r\n    </div> : <div className='ticket-content'>\r\n      {ticketContent}\r\n      <a className='use' onClick={forwardApp}>立即使用</a>\r\n      <a className='invite' onClick={this.invite.bind(this)}>邀请好友送红包，奖励停不下来</a>\r\n    </div>\r\n\r\n    return (\r\n      <div className='transition-group'>\r\n        <div className='share'>\r\n          <div className='content'>\r\n            {content}\r\n          </div>\r\n          <div className='rule'>\r\n            <h3>活动细则</h3>\r\n            <p>1、红包新老用户同享</p>\r\n            <p>2、红包与平台其他活动优惠可同享</p>\r\n            <p>3、每人每天只有三次抢红包机会</p>\r\n            <p>4、领取红包的手机号必须与使用账户优惠券的手机号一致</p>\r\n            <p>5、发放至手机号的红包需在app用手机号注册，登录后方能使用</p>\r\n            <p>6、现金卡保留法律允许范围内的对活动的解释权</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"]}