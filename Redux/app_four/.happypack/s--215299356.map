{"version":3,"sources":["src\\js\\pages\\activity\\seckill\\Scroll.js"],"names":["topNum","Scroll","props","firstArr","reward","prize","state","topClass","top","transition","WebkitTranstion","scroll","simulation","setInterval","nextProps","length","document","querySelectorAll","height","offsetHeight","setState","setTimeout","i","concatArr","getIndexValue","Str","arr","phone","replace","List","map","v","Component"],"mappings":"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","file":"Scroll.js","sourceRoot":"E:/MyStudy/Redux/app_four","sourcesContent":["import React from 'react'\r\nimport GeneratePhone from './GeneratePhone'\r\n\r\nlet topNum = 1\r\n\r\nexport default class Scroll extends React.Component {\r\n  constructor (props) {\r\n    super(props)\r\n    this.firstArr = []\r\n    this.reward = []\r\n    this.prize = []\r\n    this.state = {\r\n      reward: [],\r\n      topClass: {\r\n        top: `0rem`,\r\n        transition: `all 0.5s ease-in-out`,\r\n        WebkitTranstion: `all 0.5s ease-in-out`\r\n      }\r\n    }\r\n  }\r\n\r\n  componentWillMount () {\r\n    this.prize = this.props.scroll.prize\r\n    this.simulation()\r\n    setInterval(() => {\r\n      this.simulation()\r\n    }, 300000)\r\n  }\r\n\r\n  componentWillReceiveProps (nextProps) {\r\n    if (this.prize !== nextProps.scroll.prize) {\r\n      this.prize = nextProps.scroll.prize\r\n      this.simulation(nextProps.scroll.prize)\r\n      return\r\n    }\r\n  }\r\n\r\n  componentDidMount () {\r\n    const length = document.querySelectorAll('li.scroll-li').length\r\n    const height = document.querySelectorAll('li.scroll-li')[0].offsetHeight\r\n    setInterval(() => {\r\n      if (topNum >= length) {\r\n        topNum = 0\r\n        this.setState({\r\n          topClass: {\r\n            top: `${-height * topNum}px`\r\n          }\r\n        })\r\n        topNum++\r\n        setTimeout(() => {\r\n          this.setState({\r\n            topClass: {\r\n              top: `${-height * topNum}px`,\r\n              transition: `all 0.5s ease-in-out`,\r\n              WebkitTranstion: `all 0.5s ease-in-out`\r\n            }\r\n          })\r\n          topNum++\r\n        }, 10)\r\n        return\r\n      }\r\n      this.setState({\r\n        topClass: {\r\n          top: `${-height * topNum}px`,\r\n          transition: `all 0.5s ease-in-out`,\r\n          WebkitTranstion: `all 0.5s ease-in-out`\r\n        }\r\n      })\r\n      topNum++\r\n    }, 3000)\r\n  }\r\n\r\n  simulation (prize) {\r\n    const length = 20\r\n    this.reward = []\r\n    for (let i = 0; i < length; i++) {\r\n      if (prize) {\r\n        this.concatArr(length, i, GeneratePhone.getIndexValue(prize))\r\n        continue\r\n      }\r\n      this.concatArr(length, i)\r\n    }\r\n    this.setState({\r\n      reward: this.reward\r\n    })\r\n  }\r\n\r\n  concatArr (length, i, Str = GeneratePhone.getIndexValue(this.props.scroll.prize)) {\r\n    let arr = [[GeneratePhone.phone().replace(/(\\d{3})\\d{4}(\\d{4})/, '$1****$2'), Str]]\r\n    if (i === 0) {\r\n      this.firstArr = arr\r\n    }\r\n    this.reward = [...this.reward, ...arr]\r\n    if (i === (length - 1)) {\r\n      this.reward = [...this.reward, ...this.firstArr]\r\n    }\r\n  }\r\n\r\n  render () {\r\n    const { topClass, reward } = this.state\r\n    const List = reward.map((v, i) => <li className='scroll-li' key={i}>恭喜<b>{v[0]}</b> 抢到<b>{v[1]}</b></li>)\r\n\r\n    return (\r\n      <div className={'scroll-div'}>\r\n        <div className='scroll-bar'>\r\n          <div className='scroll' style={topClass}>\r\n            {List}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"]}