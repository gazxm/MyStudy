{"version":3,"sources":["src\\js\\pages\\activity\\eggs\\index.js"],"names":["title","lock","Eggs","props","eggs","i","push","state","count","completed","guide","visible","checkout","empty","loaded","document","then","response","message","setState","catch","middleware","bind","code","type","indexOf","setTimeout","index","close","apply","resolve","data","items","gold_egg_info","config","pop_info","map","egg","value","active","money","actived","complete","content","image","img","links","url","style","backgroundImage","window","location","href","desc","reset","__html","start","signin"],"mappings":"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","file":"index.js","sourceRoot":"E:/MyStudy/Redux/app_four","sourcesContent":["import React, {Component} from 'react';\r\nimport {Modal, Slider, Icon, Switch, Toast, Flex} from 'antd-mobile';\r\nimport {login, share} from 'utils';\r\nimport request from './request';\r\nimport 'scss/activity/eggs.component.scss';\r\n\r\nlet title = '欢乐砸金蛋';\r\nlet lock = true;\r\n\r\nexport default class Eggs extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        let eggs = [];\r\n        for(let i = 0;i < 16;i++) eggs.push({});\r\n        this.state = {\r\n            eggs,\r\n            count: 0,\r\n            completed: 0,\r\n            guide: {\r\n                visible: 0\r\n            },\r\n            checkout: {\r\n                visible: 0\r\n            },\r\n            empty: 0,\r\n            loaded: 0\r\n        };\r\n    }\r\n    componentDidMount(){\r\n        document.title = title;\r\n        request('credit-info/get-last-hit-number').then(response => {\r\n            let {message: count} = response;\r\n            this.setState({\r\n                count: +count,\r\n                loaded: 1\r\n            });\r\n        }).catch(this.middleware.bind(this));\r\n    }\r\n    middleware(response){\r\n        let {code, message} = response;\r\n        let type = 'info';\r\n        if([-1, -2].indexOf(code) >= 0){\r\n            Toast[type](message || '未知错误', 1.5);\r\n        }else if(code == -5){\r\n            login();\r\n        }else if(code == 2001){\r\n            this.setState({\r\n                empty: 1\r\n            });\r\n        }else if(code == 3){\r\n            this.setState({\r\n                empty: 2\r\n            });\r\n        }\r\n        this.setState({\r\n            loaded: 1\r\n        });\r\n        setTimeout(() => {\r\n            lock = true;\r\n        }, 1500);\r\n    }\r\n    checkout(i){\r\n        let {count, completed, checkout} = this.state;\r\n        if(!lock) return;\r\n        if(count){\r\n            checkout.index = i;\r\n            checkout.visible = 1;\r\n            this.setState({\r\n                checkout\r\n            });\r\n        }else{\r\n            this.setState({\r\n                empty: 2\r\n            });\r\n        }\r\n    }\r\n    close(){\r\n        let {checkout} = this.state;\r\n        checkout.visible = 0;\r\n        this.setState({\r\n            checkout\r\n        });\r\n    }\r\n    start(i){\r\n        let {eggs, count, completed, checkout, guide} = this.state;\r\n        if(typeof i === 'number' && lock){\r\n            lock = !lock;\r\n            new Promise(resolve => {\r\n                this.close.apply(this);\r\n                setTimeout(resolve, 500);\r\n            }).then(() => {\r\n                request(`credit-info/get-hit-gold?postion=${i}`).then(response => {\r\n                    let {gold_egg_info: items, pop_info: config} = response.data;\r\n                    eggs.map((egg, index) => {\r\n                        egg.value = items[index];\r\n                        if(i === index){\r\n                            egg.active = 1;\r\n                            guide.money = items[i];\r\n                            setTimeout(() => {\r\n                                egg.actived = 1;\r\n                                this.setState({\r\n                                    eggs\r\n                                });\r\n                            }, 500);\r\n                        }else{\r\n                            egg.complete = 1;\r\n                        }\r\n                    });\r\n                    guide.content = config.content;\r\n                    guide.image = config.img;\r\n                    guide.links = config.url;\r\n                    guide.style = guide.image ? {backgroundImage: `url(${guide.image})`} : {};\r\n\r\n                    this.setState({\r\n                        guide,\r\n                        eggs,\r\n                        count: --count\r\n                    });\r\n                    setTimeout(() => {\r\n                        completed = 1;\r\n                        guide.visible = 1;\r\n                        this.setState({\r\n                            guide,\r\n                            completed\r\n                        });\r\n                    }, 3000);\r\n                }).catch(this.middleware.bind(this));\r\n            });\r\n        }\r\n    }\r\n    reset(){\r\n        let {eggs, completed} = this.state;\r\n        if(completed){\r\n            eggs.map((egg, index) => {\r\n                egg.active = egg.actived = egg.complete = 0;\r\n            });\r\n            this.setState({\r\n                eggs,\r\n                completed: 0\r\n            });\r\n            lock = !lock;\r\n        }\r\n    }\r\n    guide(){\r\n        let {guide} = this.state;\r\n        guide.visible = 0;\r\n        this.setState({\r\n            guide\r\n        })\r\n    }\r\n    empty(){\r\n        this.setState({\r\n            empty: 0\r\n        });\r\n    }\r\n    signin(){\r\n        window.location.href = '/signin';\r\n    }\r\n    desc(){\r\n        this.setState({\r\n            empty: 3\r\n        });\r\n    }\r\n    render(){\r\n        let {eggs, count, guide, checkout, empty, loaded, completed} = this.state;\r\n        return (\r\n            <div className={`wrapper wrapper-activity-eggs ${loaded ? 'loaded' : ''}`}>\r\n                <div className='logo'/>\r\n                <div className='desc'>\r\n                    <span onClick={this.desc.bind(this)}>查看活动规则</span>\r\n                </div>\r\n                <div className='satin'>\r\n                    <ul>\r\n                        {\r\n                            eggs.map((egg, index) => (\r\n                                <li key={index} onClick={this.checkout.bind(this, index)} className={`${egg.active ? 'active' : ''}${egg.complete ? 'complete' : ''}${egg.actived ? ' actived' : ''}`}>\r\n                                    <div className='egg'/>\r\n                                    <div className='egg-crack'/>\r\n                                    <div className='money'>{egg.value}</div>\r\n                                </li>\r\n                            ))\r\n                        }\r\n                    </ul>\r\n                    <div className='tips'>\r\n                        今日还剩 <span>{count}次</span>砸蛋机会\r\n                    </div>\r\n                    <div class={`button button-reset ${completed ? '' : 'disabled'}`} onClick={this.reset.bind(this)}>重新开始</div>\r\n                </div>\r\n                <Modal className='guide' visible={guide.visible} onClose={this.guide.bind(this)} maskClosable={true} transparent>\r\n                    <div className='title'>\r\n                        {guide.money > 0 ? (\r\n                            <p>恭喜你！获得{guide.money}金币</p>\r\n                        ) : (\r\n                            <p>本次没有获得金币！</p>\r\n                        )}\r\n                        <p>参加活动获得更多金币</p>\r\n                    </div>\r\n                    <div className='picture' style={guide.style}/>\r\n                    <div className='description' dangerouslySetInnerHTML={{__html: guide.content}}></div>\r\n                    <a class='links' href={`${guide.links ? guide.links : 'javascript:;'}`}>点击查看</a>\r\n                </Modal>\r\n                <Modal className='checkout' visible={checkout.visible} onClose={this.close.bind(this)} maskClosable={true} transparent>\r\n                    <p>本次砸蛋将消耗100金币</p>\r\n                    <p>确定下锤吗?</p>\r\n                    <div class='button-group'>\r\n                        <div class='button button-violet' onClick={this.start.bind(this, checkout.index)}>我要砸</div>\r\n                        <div class='button button-cancel' onClick={this.close.bind(this)}>容朕想想</div>\r\n                    </div>\r\n                </Modal>\r\n                <Modal className='checkout' visible={empty === 1} onClose={this.empty.bind(this)} maskClosable={true} transparent>\r\n                    <p>对不起，您的金币不足！</p>\r\n                    <div class='button-group'>\r\n                        <div class='button button-violet' onClick={this.signin}>赚金币去</div>\r\n                    </div>\r\n                </Modal>\r\n                <Modal className='checkout' visible={empty === 2} onClose={this.empty.bind(this)} maskClosable={true} transparent>\r\n                    <p>今日砸蛋次数已用完</p>\r\n                    <div class='button-group'>\r\n                        <div class='button button-cancel' onClick={this.empty.bind(this)}>知道了</div>\r\n                    </div>\r\n                </Modal>\r\n                <Modal title='活动规则' className='checkout checkout-desc' visible={empty === 3} onClose={this.empty.bind(this)} maskClosable={true} transparent>\r\n                    <ul>\r\n                        <li>奖池里共有2000金币，随机分布在16个金蛋里；</li>\r\n                        <li>每次砸蛋需要消耗100积分，每人每天最多可砸5次；</li>\r\n                        <li>本活动最终解释权归现金卡所有，与Apple.Inc无关。</li>\r\n                    </ul>\r\n                </Modal>\r\n            </div>\r\n        )\r\n    }\r\n};"]}