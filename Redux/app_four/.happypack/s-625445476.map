{"version":3,"sources":["src\\js\\pages\\mobile\\repayment\\Projet.js"],"names":["Item","values","methods","Projet","props","document","title","state","selectedIndex","data","id","params","fetchData","loading","then","hide","response","code","message","info","setState","item","catch","error","val","indexOf","url","repayment_url","allUrl","repayment_all_url","location","href","period","recent_period_info","should_repay_money","should_repay_time","overdue_day","overdue_fee","repay_total","wholePeriodInfo","whole_period_info","total","whole_total_amount","map","v","k","achieve","repay_status","repay_period","repay_money","repay_fee","onChange","bind","submit","Component"],"mappings":"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","file":"Projet.js","sourceRoot":"E:/MyStudy/Redux/app_four","sourcesContent":["import React from 'react'\r\nimport { SegmentedControl, List, Button, Toast } from 'antd-mobile'\r\nconst Item = List.Item\r\nimport 'scss/mobile/repayment-projet.component.scss'\r\nimport {get} from 'utils'\r\nimport classNames from 'classnames'\r\n\r\nconst values = ['还本期', '还全款']\r\nconst methods = ['period', 'fullPayment']\r\nexport default class Projet extends React.Component {\r\n  constructor (props) {\r\n    super(props)\r\n    document.title = '还款计划'\r\n    this.state = {\r\n      selectedIndex: 0,\r\n      data: null\r\n    }\r\n  }\r\n  componentDidMount () {\r\n    const {id} = this.props.params\r\n    this.fetchData(id)\r\n  }\r\n\r\n  fetchData (id) {\r\n    Toast.loading('加载中....', 0)\r\n    get('http://credit.xianjincard.com/v2/credit-loan/get-order-detail', {id: id}).then(response => {\r\n      Toast.hide()\r\n      const {code, message, data} = response.data\r\n      if (code !== 0) {\r\n        Toast.info(message, 2)\r\n        return\r\n      }\r\n      this.setState({data: data.item})\r\n    }).catch(error => error)\r\n  }\r\n  onChange (val) {\r\n    // console.log(values.indexOf(val))\r\n    this.setState({selectedIndex: values.indexOf(val)})\r\n  }\r\n  submit () {\r\n    const {repayment_url: url, repayment_all_url: allUrl} = this.state.data\r\n    location.href = this.state.selectedIndex === 0 ? url : allUrl\r\n  }\r\n  period () {\r\n    const {recent_period_info: period} = this.state.data\r\n    return (\r\n      <List class=\"custom-list\">\r\n        <Item extra={period.should_repay_money}>本期还款额</Item>\r\n        <Item extra={period.should_repay_time}>到期还款日</Item>\r\n        <Item extra={period.overdue_day}>逾期天数</Item>\r\n        <Item extra={period.overdue_fee}>逾期管理费</Item>\r\n        <Item extra={period.repay_total}>应还总额</Item>\r\n      </List>\r\n    )\r\n  }\r\n  fullPayment () {\r\n    const {whole_period_info: wholePeriodInfo, whole_total_amount: total} = this.state.data\r\n    return (\r\n      <ul>\r\n        <li><span>期数</span><span>分期额</span><span>罚金/减免</span><span>应还额</span><span>状态</span></li>\r\n        {wholePeriodInfo.map((v, k) => <li key={k} class={classNames({achieve: v.repay_status})}><span>{v.repay_period}</span><span>{v.repay_money}</span><span>{v.repay_fee}</span><span>{v.repay_total}</span><span>{v.repay_status === 1 ? '已还' : '未还'}</span></li>)}\r\n        <li><p>剩余应还总额</p><h2>{total}</h2></li>\r\n      </ul>\r\n    )\r\n  }\r\n  render () {\r\n    const {data} = this.state\r\n    return (\r\n      <div class=\"repayment-projet\">\r\n        <SegmentedControl values={values} tintColor={'#4ab6fa'} onValueChange={this.onChange.bind(this)} />\r\n        {data && this[methods[this.state.selectedIndex]]()}\r\n        <div class=\"custom-button\">\r\n          <Button className=\"btn\" type=\"primary\" onClick={this.submit.bind(this)}>立即还款</Button>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"]}