{"version":3,"sources":["src\\js\\pages\\activity\\interest-free\\Share.js"],"names":["Share","props","codeFlag","state","phoneNumber","password","code","codeText","popupState","isShow","tip","content","callback","document","title","getElementById","checked","tips","location","href","e","target","value","length","setState","phone","reg","alert","popupHtml","click","test","verifyPhone","push","loading","then","data","hide","forward","setCodeText","number","l","setTimeout","verfiy","activityId","source","message","handleChange","bind","handleChangeTwo","handleChangeThree","getCode","display","regProtocol","Component"],"mappings":"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","file":"Share.js","sourceRoot":"E:/MyStudy/Redux/app_four","sourcesContent":["import React from 'react'\r\nimport { share, post, redirect } from 'utils'\r\nimport Toast from '../../../components/Toast'\r\nimport Download from '../components/DownloadPopup'\r\nimport Popup from '../components/Popup'\r\n\r\nimport 'scss/activity/interest-free.component.scss'\r\n\r\nexport default class Share extends React.Component {\r\n  constructor (props) {\r\n    super(props)\r\n    this.codeFlag = 1\r\n    this.state = {\r\n      phoneNumber: '',\r\n      password: '',\r\n      code: '',\r\n      codeText: '获取验证码',\r\n      popupState: {\r\n        isShow: false,\r\n        tip: '',\r\n        content: '',\r\n        callback: ''\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidMount () {\r\n    document.title = '免息狂欢日'\r\n    share('khr')\r\n    document.getElementById('checkbox').checked = true\r\n  }\r\n\r\n  popupHtml (content = '服务器繁忙 请稍后重试', tips = '朕知道了') {\r\n    return `<p>${content}</p><a class='click'>${tips}</a>`\r\n  }\r\n\r\n  regProtocol () {\r\n    location.href = 'https://api.xianjincard.com/act/protocol'\r\n  }\r\n\r\n  handleChange (e) {\r\n    if (e.target.value.length > 11) {\r\n      return\r\n    }\r\n    this.setState({\r\n      phoneNumber: e.target.value\r\n    })\r\n  }\r\n\r\n  handleChangeTwo (e) {\r\n    this.setState({\r\n      password: e.target.value\r\n    })\r\n  }\r\n\r\n  handleChangeThree (e) {\r\n    if (e.target.value.length > 6) {\r\n      return\r\n    }\r\n    this.setState({\r\n      code: e.target.value\r\n    })\r\n  }\r\n\r\n  verifyPhone (phone) {\r\n    const reg = /^1(3|4|5|7|8)\\d{9}$/\r\n    if (phone === '') {\r\n      Popup.alert(this.popupHtml(`手机号不能为空哦~`), 'popup')\r\n      Popup.click('a.click')\r\n      return false\r\n    }\r\n    if (!reg.test(phone)) {\r\n      Popup.alert(this.popupHtml(`请输入正确的手机号哦~`), 'popup')\r\n      Popup.click('a.click')\r\n      return false\r\n    }\r\n    return true\r\n  }\r\n\r\n  verfiy () {\r\n    const { phoneNumber, password, code } = this.state\r\n    if (this.verifyPhone(phoneNumber)) {\r\n      if (password === '') {\r\n        Popup.alert(this.popupHtml(`请设置你的登录密码哦~`), 'popup')\r\n        Popup.click('a.click')\r\n        return false\r\n      }\r\n      if (password.length < 6) {\r\n        Popup.alert(this.popupHtml(`密码不能小于6位哦~`), 'popup')\r\n        Popup.click('a.click')\r\n        return false\r\n      }\r\n      if (code === '') {\r\n        Popup.alert(this.popupHtml(`请输入验证码哦~`), 'popup')\r\n        Popup.click('a.click')\r\n        return false\r\n      }\r\n      if (!document.getElementById('checkbox').checked) {\r\n        Popup.alert(this.popupHtml(`请阅读并同意《现金白卡使用协议》哦~`), 'popup')\r\n        Popup.click('a.click')\r\n        return false\r\n      }\r\n    } else {\r\n      return false\r\n    }\r\n    return true\r\n  }\r\n\r\n  forward () {\r\n    redirect.push('/activity/interest-free')\r\n  }\r\n\r\n  getCode () {\r\n    const phone = this.state.phoneNumber\r\n    if (this.verifyPhone(phone) && this.codeFlag) {\r\n      Toast.loading('')\r\n      post('http://api.xianjincard.com/user/reg-get-code', {phone: phone}).then(data => data.data).then(data => {\r\n        Toast.hide()\r\n        if (data.code === 1000) {\r\n          Popup.alert(this.popupHtml(`你已经注册过了哦~`, `立即申请`), 'popup')\r\n          Popup.click('a.click', this.forward)\r\n          return\r\n        }\r\n        if (data.code === 0) {\r\n          this.setCodeText(60)\r\n          return\r\n        }\r\n        Popup.alert(this.popupHtml(`服务器繁忙 请稍候重试`), 'popup')\r\n        Popup.click('a.click')\r\n      })\r\n    }\r\n  }\r\n\r\n  setCodeText (number, l) {\r\n    setTimeout(() => {\r\n      let codeText = number + '秒后重试'\r\n      this.setState({\r\n        codeText: codeText\r\n      })\r\n      if (number) {\r\n        this.codeFlag = 0\r\n        this.setCodeText(--number, 1000)\r\n      } else {\r\n        this.codeFlag = 1\r\n        this.setState({\r\n          codeText: '重新发送'\r\n        })\r\n      }\r\n    }, l)\r\n  }\r\n\r\n  reg () {\r\n    if (this.verfiy()) {\r\n      const { phoneNumber, password, code } = this.state\r\n      const activityId = 'interestFree'\r\n      Toast.loading('')\r\n      post(`http://credit.xianjincard.com/credit-user/register?appMarket=${activityId}`, {phone: phoneNumber, password: password, code: code, source: 21}).then(data => data.data).then(data => {\r\n        Toast.hide()\r\n        if (data.code === 0) {\r\n          Popup.alert(this.popupHtml(`您已经成功注册了哦~`, `立即申请`), 'popup')\r\n          Popup.click('a.click', this.forward)\r\n        } else {\r\n          const message = data.message ? data.message : '服务器繁忙，请稍候重试'\r\n          Popup.alert(this.popupHtml(`${message}`), 'popup')\r\n          Popup.click('a.click')\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  render () {\r\n    const { codeText } = this.state\r\n\r\n    return (\r\n      <div className='transition-group'>\r\n        <div className='share'>\r\n          <p><input ref='phoneInput' className='tel' id='phone' type='text' value={this.state.phoneNumber} placeholder='请输入手机号' onChange={this.handleChange.bind(this)} /></p>\r\n          <p><input className='password' id='password' type='password' value={this.state.password} placeholder='请设置登录密码' onChange={this.handleChangeTwo.bind(this)} /></p>\r\n          <p className='special clearfix'>\r\n            <input className='code' id='code' type='text' value={this.state.code} placeholder='清输入短信验证码' onChange={this.handleChangeThree.bind(this)} />\r\n            <a onClick={this.getCode.bind(this)}>{codeText}</a>\r\n          </p>\r\n          <a className='reg' onClick={this.reg.bind(this)}><span>立即注册</span></a>\r\n          <p className='clearfix other'>\r\n            <input id='checkbox' type='checkbox' value='' style={{display: 'none'}} />\r\n            <label for='checkbox'>我已阅读并同意<a onClick={this.regProtocol.bind(this)}>《现金白卡使用协议》</a><i /></label>\r\n          </p>\r\n          <p className='company'>投资有风险 入市需谨慎<br />上海浅橙网络科技有限公司 沪ICP备16040623号</p>\r\n        </div>\r\n        <Download />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"]}