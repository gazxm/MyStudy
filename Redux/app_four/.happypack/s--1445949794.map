{"version":3,"sources":["src\\js\\pages\\cash-bonus\\withdrawal.js"],"names":["title","Item","Brief","lock","CashBonus","props","state","data","loaded","document","params","location","query","money","window","href","then","response","item","length","card_id","card_no_end","setState","catch","middleware","bind","code","message","fail","show","password","FormData","append","url","method","close","event","success","setTimeout","error","visible","logo","bank_name","withdrawal"],"mappings":"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","file":"withdrawal.js","sourceRoot":"E:/MyStudy/Redux/app_four","sourcesContent":["/* eslint-disable */\r\nimport React, {Component} from 'react';\r\nimport {List, Modal, SegmentedControl, Toast} from 'antd-mobile';\r\nimport {login, share} from 'utils';\r\nimport moment from 'moment';\r\nimport Password from 'components/Password';\r\nimport request from './request';\r\nimport 'scss/cash-bonus/index.component.scss';\r\n\r\nlet title = '余额提现';\r\nlet Item = List.Item;\r\nlet Brief = Item.Brief;\r\nlet lock = 1;\r\n\r\nexport default class CashBonus extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            data: {},\r\n            loaded: 1\r\n        };\r\n    }\r\n    componentDidMount(){\r\n        document.title = title;\r\n        let {query: params} = this.props.location;\r\n        if(!!params.money === false){\r\n            window.location.href = '/cash-bonus';\r\n        }\r\n        request('credit-card/get-bank-card').then(response => {\r\n            let {item: data} = response.data;\r\n            if(data.length && data[0].card_id && data[0].card_no_end){\r\n                data[0].money = params.money || 0;\r\n                this.setState({\r\n                    data: data[0]\r\n                });\r\n            }\r\n        }).catch(this.middleware.bind(this));\r\n    }\r\n    middleware(response){\r\n        let {code, message} = response;\r\n        this.setState({\r\n            loaded: 1\r\n        });\r\n        if(-1001 === code){\r\n            login();\r\n            return;\r\n        }else{\r\n            Toast.fail(message, 1.5);\r\n        }\r\n    }\r\n    withdrawal(){\r\n        let {data} = this.state;\r\n        let {query} = this.props.location;\r\n        Password.show((password) => {\r\n            if(lock){\r\n                lock = !lock;\r\n                let params = new FormData();\r\n                    params.append('card_id', data.card_id);\r\n                    params.append('pay_pwd', password);\r\n                    params.append('amount', query.money);\r\n                request({\r\n                    url: 'user-account/draw-cash',\r\n                    method: 'post',\r\n                    data: params\r\n                }).then(response => {\r\n                    let {message} = response;\r\n                    Password.close(window.event);\r\n                    Toast.success(message, 1.5, () => {\r\n                        window.location.href = '/cash-bonus';\r\n                    });\r\n                    lock = !lock;\r\n                }).catch(this.middleware.bind(this));\r\n            }\r\n        });\r\n    }\r\n    middleware(response){\r\n        let {code, message} = response;\r\n        if(code !== -1008){\r\n            Toast.fail(message, 1.5);\r\n            Password.close(window.event);\r\n        }else{\r\n            setTimeout(() => {\r\n                Password.error();\r\n            });\r\n        }\r\n        setTimeout(() => {\r\n            lock = !lock;\r\n        }, 1500);\r\n    }\r\n    render(){\r\n        let {data, loaded, visible} = this.state;\r\n        return (\r\n            <div className={`wrapper wrapper-cash-bonus ${loaded ? 'loaded' : ''}`}>\r\n                <List className='banks'>\r\n                    <Item\r\n                    multipleLine\r\n                    thumb={data.logo}>\r\n                        <span>{data.bank_name}</span>\r\n                        <span>尾号{data.card_no_end}</span>\r\n                    </Item>\r\n                    <Item\r\n                    multipleLine>\r\n                        <span>提现金额</span>\r\n                        <span className='money'>{data.money}</span>\r\n                    </Item>\r\n                </List>\r\n                <div className='button-withdrawal' onClick={this.withdrawal.bind(this)}>确认</div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]}