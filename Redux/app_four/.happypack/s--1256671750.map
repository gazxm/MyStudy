{"version":3,"sources":["src\\js\\pages\\mobile\\certification\\index.js"],"names":["title","Certification","props","state","loaded","interceptors","response","use","code","message","alert","text","onPress","reject","resolve","error","document","then","data","item","header","list","list_name","is_basics_verify","verify_loan_pass","double_repayment","is_new_user","is_living","verify","map","url","first_url","type","push","tag","basic","id","link","status","i","indexOf","replace","verifys","children","label","setState","setTimeout","verify_score","gauge","element","refs","credit","value","value_max","max","render","update","score","catch","wrapper","clientWidth","index","icon","logo","style","height","click","test","window","location","href","active","backgroundImage","__html"],"mappings":"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","file":"index.js","sourceRoot":"E:/MyStudy/Redux/app_four","sourcesContent":["/* eslint-disable */\r\nimport React, {Component} from 'react';\r\nimport {Modal, Grid, Carousel} from 'antd-mobile';\r\nimport classnames from 'classnames';\r\nimport {redirect, login, forwardApp as download} from 'utils';\r\nimport 'scss/mobile/certification.component.scss';\r\nimport request from 'common/request';\r\n\r\nimport basics from './basics';\r\n\r\nimport Gauge from './gauge';\r\n\r\nconst title = '认证中心';\r\n\r\nexport default class Certification extends Component {\r\n    state = {\r\n        loaded: 0\r\n    }\r\n    constructor(props){\r\n        super(props);\r\n        request.interceptors.response.use(response => {\r\n            let {code, message} = response;\r\n            if(code == -2){\r\n                Modal.alert('提 示', message, [{\r\n                    text: '确 定',\r\n                    onPress(){\r\n                        login();\r\n                    }\r\n                }])\r\n                return Promise.reject(response);\r\n            }\r\n            return Promise.resolve(response);\r\n        }, error => {\r\n            return Promise.reject(error);\r\n        });\r\n    }\r\n    componentDidMount(){\r\n        document.title = title;\r\n        request('v2/credit-card/get-verification-info').then(response => {\r\n            let {item: {\r\n                header,\r\n                list,\r\n                list_name,\r\n            }, verify_loan_pass: is_basics_verify, double_repayment, is_new_user, is_living} = response.data;\r\n            let verify = [];\r\n            // url format\r\n            list && list.map(data => {\r\n                (!data.url && data.first_url) && (data.url = data.first_url);\r\n                data.type == 1 && verify.push(data.tag);\r\n                basics.map(basic => {\r\n                    if(basic.id == data.tag){\r\n                        data.url = basic.link;\r\n                    }\r\n                });\r\n                if(data.tag == 4 && data.status && is_basics_verify){\r\n                    data.url = data.first_url;\r\n                }\r\n            });\r\n            if(!!!is_basics_verify){\r\n                for(let i in list){\r\n                    let {tag: id, url: link, status} = list[i];\r\n                    if(verify.indexOf(id) >= 0 && !!!status && link){\r\n                        redirect.replace(link);\r\n                        break;\r\n                    }\r\n                }\r\n            }else{\r\n                let verifys = [];\r\n                for(let i in list_name){\r\n                    let data = list_name[i];\r\n                    let children = [];\r\n                    list && list.map(data => {\r\n                        i == data.type && children.push(data);\r\n                    });\r\n                    verifys.push({\r\n                        id: +i,\r\n                        label: data.title,\r\n                        children\r\n                    })\r\n                }\r\n                this.setState({\r\n                    header,\r\n                    verifys,\r\n                    is_basics_verify,\r\n                    double_repayment,\r\n                    is_new_user,\r\n                    is_living,\r\n                    loaded: 1\r\n                });\r\n                setTimeout(() => {\r\n                    let {verify_score: data} = header;\r\n                    let gauge = new Gauge({\r\n                        element: this.refs.credit,\r\n                        value: 0,\r\n                        value_max: data.max\r\n                    });\r\n                    gauge.render();\r\n                    setTimeout(() => {\r\n                        gauge.update(data.score);\r\n                    }, 500);\r\n                });\r\n            }\r\n        }).catch(response => response);\r\n        \r\n    }\r\n    render(){\r\n        let {wrapper = {clientWidth: 0}} = this.refs;\r\n        let {header = {}, verifys = [], loaded, double_repayment, is_new_user, is_living} = this.state;\r\n        let item = (data, index) => {\r\n            let {title: text, data: value, logo: icon, url: link, status, type} = data;\r\n            let style = {\r\n                height: wrapper.clientWidth / 4\r\n            };\r\n            let click = () => {\r\n                if(!!!link) return;\r\n                if(!is_new_user && type != 1 && status != 1 && !is_living){\r\n                    Modal.alert('下载App', '下载app后可完善高级认证，完善后可借更高的额度', [{\r\n                        text: '取消'         \r\n                    }, {\r\n                        text: '下载app',\r\n                        onPress(){\r\n                            download();\r\n                        }\r\n                    }])\r\n                    return;\r\n                }\r\n                if(/^(https?|\\/\\/)/.test(link)){\r\n                    window.location.href = link;\r\n                }else{\r\n                    redirect.push(link);\r\n                }\r\n            };\r\n            return (\r\n                <div className={classnames({\r\n                    'am-grid-item-contain': true,\r\n                    active: !!status\r\n                })} style={style} onClick={click}>\r\n                    <div className='am-grid-icon' style={{backgroundImage: `url(${icon})`}}></div>\r\n                    <div className='am-grid-text'>{text}</div>\r\n                    {(!status && value) && (<div className='corner-mark'>\r\n                        <span>{value}</span>\r\n                    </div>)}\r\n                </div>\r\n            );\r\n        };\r\n        return (\r\n            <div ref='wrapper' className={classnames({'wrapper wrapper-mobile': true, loaded})}>\r\n                <div className='authentication'>\r\n                    <div className='header'>\r\n                        <div className='instruction' onClick={() => {\r\n                            redirect.push('/mobile/certification/instruction');\r\n                        }}>分数说明</div>\r\n                        \r\n                        <Carousel>\r\n                            <div className='credit'>\r\n                                <canvas ref='credit' data-value='60' data-max-value='120'/>\r\n                                <div className='tips'>{header.verify_score && header.verify_score.title}</div>\r\n                            </div>\r\n                            <div className='credit-amount'>\r\n                                <div className='credit-line'>\r\n                                    <div>\r\n                                        <p>{header.status == 3 ? header.data : '认证中'}</p>\r\n                                        <span>我的额度</span>\r\n                                    </div>\r\n                                </div>\r\n                                <div className='tips'>{header.title}</div>\r\n                            </div>\r\n                        </Carousel>\r\n                    </div>\r\n                    {verifys && verifys.map((verify, index) => (\r\n                        <div key={index}>\r\n                            {!(is_new_user && verify.id != 1) ? \r\n                                <div className='verifys'>\r\n                                    <div className='title' dangerouslySetInnerHTML={{__html: verify.label}}></div>\r\n                                    {verify.children && <Grid data={verify.children} renderItem={item}/>}\r\n                                </div>\r\n                            : ''}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n};"]}