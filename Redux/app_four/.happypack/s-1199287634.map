{"version":3,"sources":["src\\js\\pages\\mobile\\repayment\\Result.js"],"names":["btnText","text","clsName","Result","props","window","location","href","state","item","url","document","title","fetch","params","loading","cardTag","query","card_tag","then","result","hide","data","code","info","message","setState","setTimeout","polling","trade_code","button_action","button","button_repay","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AAEA;;AACA;;;;AACA;;;;;;AAEA,IAAM,UAAU,CAAC,AAAD,MAAO,AAAP,SAAgB,AAAhB,QAAwB,AAAxB,AAAhB;AALA;;AAMA,IAAM,OAAO,CAAC,AAAD,QAAS,AAAT,QAAiB,AAAjB,AAAb;AACA,IAAM,UAAU,CAAC,AAAD,WAAY,AAAZ,QAAoB,AAApB,AAAhB;;IACqB,A;kCACnB;;kBAAa,AAAb,OAAoB;wCAAA;;sIACZ,AADY,AAElB;;8BAAc,YAAY,AACxB;aAAO,AAAP,SAAgB,AAAhB,OAAuB,KAAK,AAAL,MAAW,AAAX,KAAgB,AAAvC,AACD;AAFD,AAGA;UAAK,AAAL,QAAa,EAAC,MAAM,AAAP,AAAb,AALkB;WAMnB;;;;;wCACoB,AACnB;eAAS,AAAT,QAAiB,AAAjB,AACA;WAAK,AAAL,MAAW,KAAK,AAAL,MAAW,AAAtB,AACD;;;;0BACM,A,QAAQ;mBACb;;sBAAM,AAAN,QAAc,AAAd,AADa;UAEE,AAFF,UAEa,KAAK,AAAL,MAAW,AAAX,SAAoB,AAFjC,MAER,AAFQ,AAGb;;kBAAY,OAAO,AAAP,WAAkB,AAA9B,AACA;sBAAI,AAAJ,4DAAgE,AAAhE,QAAwE,AAAxE,KAA6E,UAAC,AAAD,QAAY,AACvF;wBAAM,AAAN,AACA;eAAO,OAAO,AAAd,AACD;AAHD,SAGG,AAHH,KAGQ,UAAC,AAAD,MAAU,AAChB;YAAI,KAAK,AAAL,SAAc,AAAlB,GAAqB,AACnB;0BAAM,AAAN,KAAW,KAAK,AAAhB,SAAyB,AAAzB,AACA;AACD;AACD;eAAK,AAAL,SAAc,EAAC,MAAM,KAAK,AAAL,KAAU,AAAjB,AAAd,AACD;AATD,AAUD;;;;4BACQ,A,MAAM;mBACb;;UAAI,SAAS,AAAb,GAAgB,AACd;mBAAW,YAAM,AAAE;iBAAK,AAAL,MAAW,OAAK,AAAL,MAAW,AAAtB,AAA+B;AAAlD,WAAoD,AAApD,AACD;AACF;;;;6BACS;UACD,AADC,OACO,KAAK,AADZ,MACD,AADC,AAER;;UAAI,SAAS,AAAb,MAAmB,AACjB;eAAO,AAAP,AACD;AACD;WAAK,AAAL,QAAa,KAAK,AAAlB,AACA;aACE,gBAAA,cAAA,SAAK,WAAM,AAAX,AACE,2DAAG,WAAO,QAAQ,KAAK,AAAb,AAAV,AADF,AAEE,gCAAA,cAAA,MAAK,WAAK,KAAK,AAAV,AAAL,AAFF,AAGE,8BAAA,cAAA,KAAI,WAAK,AAAT,AAHF,AAIE,0BAAA,cAAA,OAAG,WAAU,AAAb,OAAmB,MAAM,KAAK,AAA9B,AAA8C,yBAAQ,KAAK,AAAb,AAA9C,AAJF,AAKG,eAAK,AAAL,gBAAqB,gBAAA,cAAA,KAAA,MAAa,gFAAA,cAAA,OAAG,MAAM,KAAK,AAAd,gBAAA,AAAb,AALxB,AADF,AASD;;;;EA/CiC,gBAAM,A;;kBAArB,A","file":"Result.js","sourceRoot":"E:/MyStudy/Redux/app_four","sourcesContent":["import React from 'react'\r\n// import {Button} from 'antd-mobile'\r\nimport {navLeftButton, get} from 'utils'\r\nimport Toast from 'components/Toast'\r\nimport 'scss/mobile/repayment.result.component.scss'\r\n\r\nconst btnText = ['完成', '支付宝还款', '重新支付', '知道了']\r\nconst text = ['还款成功', '还款失败', '还款等待']\r\nconst clsName = ['success', 'fail', '']\r\nexport default class Result extends React.Component {\r\n  constructor (props) {\r\n    super(props)\r\n    navLeftButton(function () {\r\n      window.location.href = this.state.item.url\r\n    })\r\n    this.state = {item: null}\r\n  }\r\n  componentDidMount () {\r\n    document.title = '还款结果'\r\n    this.fetch(this.props.params)\r\n  }\r\n  fetch (params) {\r\n    Toast.loading('加载中...')\r\n    let {card_tag: cardTag} = this.props.location.query\r\n    cardTag && (params.card_tag = cardTag)\r\n    get('http://credit.xianjincard.com/credit-pay/pay-result-code', params).then((result) => {\r\n      Toast.hide()\r\n      return result.data\r\n    }).then((data) => {\r\n      if (data.code !== 0) {\r\n        Toast.info(data.message, 2)\r\n        return\r\n      }\r\n      this.setState({item: data.data.item})\r\n    })\r\n  }\r\n  polling (code) {\r\n    if (code === 2) {\r\n      setTimeout(() => { this.fetch(this.props.params) }, 5000)\r\n    }\r\n  }\r\n  render () {\r\n    const {item} = this.state\r\n    if (item === null) {\r\n      return null\r\n    }\r\n    this.polling(item.trade_code)\r\n    return (\r\n      <div class=\"repayment-result\">\r\n        <i class={clsName[item.trade_code]}></i>\r\n        <h1>{text[item.trade_code]}</h1>\r\n        <p>{item.message}</p>\r\n        <a className=\"btn\" href={item.button_action}>{btnText[item.button]}</a>\r\n        {item.button_repay && <p>银行卡无法还款？点此<a href={item.button_repay}>试试支付宝还款</a></p>}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"]}