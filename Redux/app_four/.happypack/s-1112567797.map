{"version":3,"sources":["src\\js\\pages\\misc\\business\\index.js"],"names":["Item","title","lock","url","timer","ID","Date","now","request","data","script","document","getElementById","element","createElement","id","body","appendChild","v","callback","src","stringify","window","code","response","message","fail","alert","forms","querySelectorAll","i","hasOwnProperty","value","Welcome","props","state","areas","undefined","loaded","visible","setState","values","join","setTimeout","remark","refs","channel_name","input","relation_name","relation_phone","textarea","offline","focus","channel_area","wrapper","format","bind","active","disabled","submit"],"mappings":"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","file":"index.js","sourceRoot":"E:/MyStudy/Redux/app_four","sourcesContent":["import qs from 'qs';\r\nimport React, {Component} from 'react';\r\nimport {Picker, List, InputItem, TextareaItem, Modal, Toast} from 'antd-mobile';\r\nimport Register from 'components/Register';\r\nimport {forwardApp as download} from 'utils';\r\n\r\nimport classnames from 'classnames';\r\nimport 'scss/components/reboot.component.scss';\r\nimport 'scss/misc/business.component.scss';\r\nimport data from './data';\r\n\r\nconst Item = List.Item;\r\n\r\nlet title = '招募合作';\r\nlet lock = true;\r\nlet url = '//apimerchant.xianjincard.com/interface/save-apply-info';\r\nlet timer;\r\n\r\nconst ID = `jsonp${Date.now()}`;\r\nfunction request(data = {}){\r\n    let script = document.getElementById(ID)\r\n    let element = script || document.createElement('script');\r\n\r\n    !!!script && (element.id = ID, document.body.appendChild(element));\r\n\r\n    data.v = Date.now();\r\n    data.callback = 'callback';\r\n    element.src = `${url}?${qs.stringify(data)}`;\r\n}\r\n// jsonp callback\r\nwindow.callback = response => {\r\n    let {code, message} = response;\r\n    if(code != 0){\r\n        Toast.fail(message, 1)\r\n    }else{\r\n        Modal.alert('系统提示', message);\r\n        let forms = document.querySelectorAll('input,textarea');\r\n        for(let i in forms){\r\n            if(forms.hasOwnProperty(i)){\r\n                forms[i].value = '';\r\n            }\r\n        }\r\n    }\r\n    lock = true;\r\n};\r\n\r\nexport default class Welcome extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            areas: '',\r\n            value: undefined,\r\n            loaded: 1,\r\n            lock: 0,\r\n            visible: 0\r\n        };\r\n    }\r\n    componentDidMount(){\r\n        document.title = title;\r\n    }\r\n    areas(value){\r\n        this.setState({\r\n            value\r\n        });\r\n    }\r\n    format(values){\r\n        let areas = values.join(' ');\r\n        setTimeout(() => {\r\n            this.setState({\r\n                areas\r\n            });\r\n        });\r\n        return areas;\r\n    }\r\n    remark(remark){\r\n        this.setState({\r\n            remark\r\n        });\r\n    }\r\n    submit(){\r\n        let {areas, lock} = this.state;\r\n        let {\r\n            channel_name: {refs: {input: channel_name}},\r\n            relation_name: {refs: {input: relation_name}},\r\n            relation_phone: {refs: {input: relation_phone}},\r\n            remark: {refs: {textarea: remark}},\r\n        } = this.refs;\r\n        \r\n        if(!!!lock){\r\n            if(!!!channel_name.value){\r\n                Toast.offline('渠道商名称不能为空', 1, () => {\r\n                    channel_name.focus();\r\n                });\r\n                return;\r\n            }else if(!!!relation_name.value){\r\n                Toast.offline('姓名不能为空', 1, () => {\r\n                    relation_name.focus();\r\n                });\r\n                return;\r\n            }else if(!!!relation_phone.value){\r\n                Toast.offline('电话不能为空', 1, () => {\r\n                    relation_phone.focus();\r\n                });\r\n                return;\r\n            }else if(!!!areas){\r\n                Toast.offline('合作地区不能为空');\r\n                return;\r\n            }else if(!!!remark.value){\r\n                Toast.offline('备注不能为空', 1, () => {\r\n                    remark.focus();\r\n                });\r\n                return;\r\n            }\r\n            lock = !lock;\r\n            request({\r\n                channel_name: channel_name.value,\r\n                channel_area: areas,\r\n                relation_name: relation_name.value,\r\n                relation_phone: relation_phone.value,\r\n                remark: remark.value\r\n            });\r\n        }\r\n\r\n    }\r\n    render(){\r\n        let {remark, value, loaded, lock, visible} = this.state;\r\n        return (\r\n            <div className={classnames({wrapper: true, loaded})}>\r\n                <div className='form'>\r\n                    <div className='form-group'>\r\n                        <InputItem  ref='channel_name' name='channel_name' placeholder='渠道商名称'/>\r\n                    </div>\r\n                    <div className='form-group form-inline'>\r\n                        <InputItem ref='relation_name' name='relation_name' placeholder='姓名'/>\r\n                        <InputItem ref='relation_phone' name='relation_phone' placeholder='电话'/>\r\n                    </div>\r\n                    <div className='form-group'>\r\n                        <Picker className='areas' cols={2} data={data} value={value} extra='合作区域' format={this.format.bind(this)} onChange={this.areas.bind(this)} onPickerChange={this.areas.bind(this)}>\r\n                            <Item className={classnames({'am-area-item': true, active: !!value})} arrow='down'></Item>\r\n                        </Picker>\r\n                    </div>\r\n                    <div className='form-group'>\r\n                        <TextareaItem onChange={this.remark.bind(this)} ref='remark' name='remark' value={remark} rows={5} count={140} placeholder='备注内容（团队介绍、账务的资源情况等）'/>\r\n                    </div>\r\n                    <div className='form-group'>\r\n                        <div className={classnames({'button-submit': true, disabled: lock})} onClick={this.submit.bind(this)}>确认提交</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}"]}